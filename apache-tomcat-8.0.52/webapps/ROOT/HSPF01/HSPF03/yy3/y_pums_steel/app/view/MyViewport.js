/*
 * File: app/view/MyViewport.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Y_PUMS_STEEL.view.MyViewport', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.myviewport',

    requires: [
        'Y_PUMS_STEEL.view.MyViewportViewModel',
        'Y_PUMS_STEEL.view.TbButton',
        'Y_PUMS_STEEL.view.MyForm',
        'Ext.form.Panel',
        'Ext.form.Label',
        'Ext.form.field.ComboBox',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.grid.column.Number',
        'Ext.view.Table',
        'Ext.selection.CheckboxModel',
        'Ext.grid.plugin.Exporter',
        'Ext.grid.plugin.CellEditing',
        'Ext.resizer.Splitter'
    ],

    viewModel: {
        type: 'myviewport'
    },
    height: 250,
    style: 'background-color: white',
    width: 400,

    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    items: [
        {
            xtype: 'toolbarBtn'
        },
        {
            xtype: 'container',
            flex: 1,
            padding: '0 10 0 10',
            layout: 'fit',
            items: [
                {
                    xtype: 'container',
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'myform'
                        },
                        {
                            xtype: 'container',
                            flex: 1,
                            layout: {
                                type: 'hbox',
                                align: 'stretch',
                                padding: 10
                            },
                            items: [
                                {
                                    xtype: 'container',
                                    flex: 0.45,
                                    layout: {
                                        type: 'vbox',
                                        align: 'stretch'
                                    },
                                    items: [
                                        {
                                        	xtype: 'container',
                                        	flex: 1,
                                        	height: 45,
                                        	maxHeight: 45,
                                        	minHeight: 45,
                                        	style: 'padding: 5px;',
                                        	layout: {
                                        		type: 'hbox',
                                        		align: 'stretch'
                                        	},
                                        	items: [
                                        	        {
                                                        xtype: 'combobox',
                                                        flex: 1,
                                                        id: 'V_CUR',
                                                        maxWidth: 300,
                                                        minWidth: 300,
                                                        width: 300,
                                                        fieldLabel: '화폐단위',
                                                        labelWidth: 150,
                                                        displayField: 'DTL_NM',
                                                        valueField: 'DTL_CD',
                                                        value: 'KRW',
                                                        editable: false,
                                                        store: Ext.create('Ext.data.Store',{
                                                      		autoLoad: true,
                                                      		storeId: 'store1',
                                                      		proxy: {
                                                                  type: 'ajax',
                                                                  extraParams: {
                                                                   	V_MAST_CD: 'BA04',
                                                                   	V_GRID: 'Y'
                                                                  },	
                                                                  api: {
                                                                      read: '/HSPF01/common/sql/Combobox.jsp'
                                                                  },
                                                                  reader: {
                                                                      type: 'json',
                                                                      rootProperty: 'resultList'
                                                                  }
                                                              }
                                                      	}),
                                                    },
                                    	        ]
                                        },
                                        {
                                            xtype: 'container',
                                            flex: 1,
                                            height: 45,
                                            maxHeight: 45,
                                            minHeight: 45,
                                            margin: '10 0 0 0',
                                            style: 'border: 1px solid lightgray; padding: 5px;',
                                            layout: {
                                                type: 'hbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    flex: 0.2,
                                                    maxWidth: 100,
                                                    minWidth: 100,
                                                    width: 100,
                                                    text: '월/건별한도'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    fieldStyle: 'text-align: right;',
                                                    flex: 0.4,
                                                    fieldLabel: '승인액',
                                                    labelWidth: 50,
                                                    maxWidth: 200,
                                                    minWidth: 200,
                                                    width: 200,
                                                    id: 'V_MON_APR_AMT',
                                                    value: 0
                                                },
                                                {
                                                    xtype: 'numberfield',
                                                    flex: 0.4,
                                                    margin: '0 0 0 30',
                                                    fieldLabel: '사용액',
                                                    labelWidth: 50,
                                                    hidden: true,
                                                    id: 'V_MON_USE_AMT'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'container',
                                            flex: 1,
                                            margins: '',
                                            height: 45,
                                            margin: '10 0 0 0',
                                            maxHeight: 45,
                                            minHeight: 45,
                                            style: 'border: 1px solid lightgray; padding: 5px;',
                                            layout: {
                                                type: 'hbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    flex: 0.2,
                                                    maxWidth: 100,
                                                    minWidth: 100,
                                                    width: 100,
                                                    text: '누계한도'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    flex: 0.4,
                                                    fieldLabel: '<span style=\'color:red\'>*</span>승인액',
                                                    labelWidth: 50,
                                                    maxWidth: 200,
                                                    minWidth: 200,
                                                    width: 200,
                                                    id: 'V_SUM_APR_AMT',
                                                    fieldStyle: 'text-align: right;',
                                                    value: 0
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    flex: 0.4,
                                                    margin: '0 0 0 30',
                                                    fieldLabel: '사용액',
                                                    labelWidth: 50,
                                                    hidden: true,
                                                    id: 'V_SUM_USE_AMT'
                                                }
                                            ]
                                        },
                                        {
                                        	hidden: true,
                                            xtype: 'container',
                                            flex: 1,
                                            margins: '',
                                            height: 45,
                                            margin: '10 0 0 0',
                                            maxHeight: 45,
                                            minHeight: 45,
                                            style: 'border: 1px solid lightgray; padding: 5px;',
                                            layout: {
                                                type: 'hbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    flex: 0.2,
                                                    maxWidth: 100,
                                                    minWidth: 100,
                                                    width: 100,
                                                    text: '외상한도'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    flex: 0.4,
                                                    fieldLabel: '승인액',
                                                    labelWidth: 50,
                                                    maxWidth: 200,
                                                    minWidth: 200,
                                                    width: 200,
                                                    id: 'V_BILL_LT_APR_AMT',
                                                    fieldStyle: 'text-align: right;',
                                                    value: 0
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    flex: 0.4,
                                                    margin: '0 0 0 30',
                                                    fieldLabel: '사용액',
                                                    labelWidth: 50,
                                                    hidden: true,
                                                    id: 'V_BILL_LT_USE_AMT'
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'container',
                                            flex: 1,
                                            margins: '',
                                            height: 45,
                                            margin: '10 0 0 0',
                                            maxHeight: 45,
                                            minHeight: 45,
                                            style: 'padding: 5px;',
                                            layout: {
                                                type: 'hbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    flex: 0.2,
                                                    maxWidth: 80,
                                                    minWidth: 80,
                                                    width: 80,
                                                    text: '매입결제방법',
                                                    
                                                },
                                                {
                                                    xtype: 'combobox',
                                                    flex: 0.5,
                                                    fieldLabel: '',
                                                    labelWidth: 60,
                                                    maxWidth: 350,
                                                    minWidth: 350,
                                                    width: 350,
                                                    displayField: 'DTL_NM',
                                                    valueField: 'DTL_CD',
                                                    id: 'V_PAY_METH',
                                                    labelWidth: 80,
                                                    editable: false,
                                                    store: Ext.create('Ext.data.Store',{
                                                  		autoLoad: true,
                                                  		storeId: 'storep',
                                                  		proxy: {
                                                              type: 'ajax',
                                                              extraParams: {
                                                               	V_MAST_CD: 'MA03',
                                                               	V_GRID: 'Y'
                                                              },	
                                                              api: {
                                                                  read: '/HSPF01/common/sql/Combobox.jsp'
                                                              },
                                                              reader: {
                                                                  type: 'json',
                                                                  rootProperty: 'resultList'
                                                              }
                                                          }
                                                  	}),
                                                  	listConfig: {
                                                        itemTpl: [
                                                            '<div>{DTL_NM} ({DTL_CD})</div>'
                                                        ]
                                                    }
                                                },
                                                {
                                                    xtype: 'container',
                                                    flex: 0.4
                                                }
                                            ]
                                        },
                                        {
                                        	xtype: 'container',
                                        	flex: 1,
                                        	margins: '',
                                        	height: 45,
                                        	margin: '10 0 0 0',
                                        	maxHeight: 45,
                                        	minHeight: 45,
                                        	style: 'padding: 5px;',
                                        	layout: {
                                        		type: 'hbox',
                                        		align: 'stretch'
                                        	},
                                        	items: [
                                        	        {
                                        	        	xtype: 'label',
                                        	        	flex: 0.2,
                                        	        	maxWidth: 80,
                                        	        	minWidth: 80,
                                        	        	width: 80,
                                        	        	text: '매출결제방법',
                                        	        	
                                        	        },
                                        	        {
                                        	        	xtype: 'combobox',
                                        	        	flex: 0.5,
                                        	        	fieldLabel: '',
//                                        	        	labelWidth: 60,
                                        	        	maxWidth: 200,
                                        	        	minWidth: 200,
                                        	        	width: 200,
                                        	        	displayField: 'DTL_NM',
                                        	        	valueField: 'DTL_CD',
                                        	        	id: 'V_PAY_METH_SL',
                                        	        	labelWidth: 80,
                                        	        	editable: false,
                                        	        	store: Ext.create('Ext.data.Store',{
                                        	        		autoLoad: true,
                                        	        		storeId: 'storep',
                                        	        		proxy: {
                                        	        			type: 'ajax',
                                        	        			extraParams: {
                                        	        				V_MAST_CD: 'MA17',
                                        	        				V_GRID: 'Y'
                                        	        			},	
                                        	        			api: {
                                        	        				read: '/HSPF01/common/sql/Combobox.jsp'
                                        	        			},
                                        	        			reader: {
                                        	        				type: 'json',
                                        	        				rootProperty: 'resultList'
                                        	        			}
                                        	        		}
                                        	        	}),
                                        	        	listConfig: {
                                        	        		itemTpl: [
                                        	        		          '<div>{DTL_NM} ({DTL_CD})</div>'
                                        	        		          ]
                                        	        	},
                                        	        	listeners: {
                                        	        		change: function(oldValue, newValue) {
                                        	        			if(newValue == 'C' || newValue == 'D') {
                                        	        				Ext.getCmp('V_BN_DT').setDisabled(false);
                                        	        			} else {
                                        	        				Ext.getCmp('V_BN_DT').setDisabled(true);
                                        	        				Ext.getCmp('V_BN_DT').setValue('일 ~ 일');
                                        	        			}
                                        	        		}
                                        	        	}
                                        	        },
                                        	        {
                                                    	xtype: 'textfield',
//                                                    	flex: 0.4,
                                                    	maxWidth: 230,
                                                    	minWidth: 230,
                                                    	width: 230,
                                                    	fieldLabel: '',
                                                    	labelWidth: 110,
                                                    	id: 'V_BN_DT',
                                                    	margin: '0 0 0 30',
                                                    	fieldLabel: '외상기간',
                                                    	disabled: true,
                                                    	value: '일 ~ 일',
                                                    	labelAlign: 'right'
                                                    }, 
//                                        	        {
//                                        	        	xtype: 'container',
//                                        	        	flex: 0.4
//                                        	        }
                                        	        ]
                                        },
                                        {
                                        	hidden: true,
                                            xtype: 'container',
                                            flex: 1,
                                            margins: '',
                                            height: 45,
                                            margin: '10 0 0 0',
                                            maxHeight: 45,
                                            minHeight: 45,
                                            style: 'padding: 5px;',
                                            layout: {
                                                type: 'hbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    flex: 0.2,
                                                    maxWidth: 80,
                                                    minWidth: 80,
                                                    width: 0,
                                                    text: '매출외상한도'
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    flex: 0.4,
                                                    maxWidth: 150,
                                                    minWidth: 150,
                                                    width: 150,
                                                    fieldLabel: '',
                                                    labelWidth: 50,
                                                    id: 'V_BILL_LT_AMT',
                                                    fieldStyle: 'text-align: right',
                                                    value: 0
                                                },
                                                {
                                                    xtype: 'container',
                                                    flex: 0.4
                                                }
                                            ]
                                        }
                                    ]
                                },
                                {
                                    xtype: 'container',
                                    flex: 0.55,
                                    layout: {
                                        type: 'vbox',
                                        align: 'stretch'
                                    },
                                    items: [
                                        {
                                            xtype: 'label',
                                            padding: 10,
                                            text: '결의조건'
                                        },
                                        {
                                            xtype: 'container',
                                            padding: 10,
                                            layout: {
                                                type: 'hbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    flex: 1,
                                                    maxWidth: 100,
                                                    minWidth: 100,
                                                    width: 100,
                                                    text: '1) 대행수수료'
                                                },
                                                {
                                                    xtype: 'combobox',
                                                    flex: 1,
                                                    maxWidth: 220,
                                                    minWidth: 220,
                                                    width: 220,
                                                    fieldLabel: '조건코드',
                                                    labelWidth: 60,
                                                    displayField: 'DTL_NM',
                                    	        	valueField: 'DTL_CD',
                                    	        	id: 'V_MID_TYPE',
                                    	        	editable: false,
                                    	        	store: Ext.create('Ext.data.Store',{
                                    	        		autoLoad: true,
                                    	        		storeId: 'store3',
                                    	        		proxy: {
                                    	        			type: 'ajax',
                                    	        			extraParams: {
                                    	        				V_MAST_CD: 'BA22-2',
                                    	        				V_GRID: 'Y'
                                    	        			},	
                                    	        			api: {
                                    	        				read: '/HSPF01/common/sql/Combobox.jsp'
                                    	        			},
                                    	        			reader: {
                                    	        				type: 'json',
                                    	        				rootProperty: 'resultList'
                                    	        			}
                                    	        		}
                                    	        	})
                                    	        	,
                                            		listConfig: {
                                                        itemTpl: [
                                                            '<div>{DTL_NM} ({DTL_CD})</div>'
                                                        ]
                                                    },
                                                },
                                                {
                                                    xtype: 'textfield',
                                                    maxWidth: 80,
                                                    minWidth: 80,
                                                    width: 80,
                                                    fieldLabel: '',
                                                    id: 'V_MID_RATE',
                                                    value: 0,
                                                    fieldStyle: 'text-align: right',
                                                },
                                                {
                                                    xtype: 'combobox',
                                                    flex: 1,
                                                    maxWidth: 100,
                                                    minWidth: 100,
                                                    width: 100,
                                                    fieldLabel: '',
                                                    displayField: 'DTL_NM',
                                    	        	valueField: 'DTL_CD',
                                    	        	id: 'V_MID_UNIT',
                                    	        	editable: false,
                                    				store : Ext.create('Ext.data.Store',{
                                    	        		autoLoad: true,
                                    	        		storeId: 'store_unit',
                                    	        		proxy: {
                                    	        			type: 'ajax',
                                    	        			extraParams: {
                                    	        				V_MAST_CD: 'BA40',
                                    	        				V_GRID: 'Y'
                                    	        			},	
                                    	        			api: {
                                    	        				read: '/HSPF01/common/sql/Combobox.jsp'
                                    	        			},
                                    	        			reader: {
                                    	        				type: 'json',
                                    	        				rootProperty: 'resultList'
                                    	        			}
                                    	        		}
                                    	        	})
                                    	        	,
                                            		listConfig: {
                                                        itemTpl: [
                                                            '<div>{DTL_NM}</div>'
                                                        ]
                                                    },
                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                        if(Ext.data.StoreManager.lookup('store_unit').findRecord('DTL_CD',value) !==null)
                                                        {
                                                            return Ext.data.StoreManager.lookup('temp').findRecord('DTL_CD',value).get('DTL_NM');
                                                        }
                                                        return value;
                                                    },
                                                },
                                                {
                                                    xtype: 'label',
                                                    text: '%',
                                                    hidden: true
                                                },
                                                {
                                                	hidden: true,
                                                	xtype: 'button',
                                                	text: '관리(POPUP)',
                                                	margin : '0 0 0 30',
                                                    listeners: {
                                                    	click:  function(button, e, eOpts) {
                                                    		if(Ext.getCmp('V_RISK_NO').getValue() != '') {
                                                            		var popup = Ext.create("Y_PUMS_STEEL.view.MyWindow");
                                                                    
                                                            		popup.center();
                                                                    popup.show();
                                                                    
                                                                    Ext.getCmp('WW_BAS_DT').setValue(Ext.getCmp('V_RISK_DT').getValue());
                                                                    Ext.getCmp('WW_S_BP_CD').setValue(Ext.getCmp('V_S_BP_CD').getValue());
                                                                    Ext.getCmp('WW_S_BP_NM').setValue(Ext.getCmp('V_S_BP_NM').getValue());
                                                                    Ext.getCmp('WW_MID_TYPE').setValue(Ext.getCmp('V_MID_TYPE').getValue());
                                                                    
                                                                    var store = Ext.getStore('PopStore_w');
                                                                    store.removeAll();
                                                                    store.load({
                                            							params: {
                                            								V_TYPE: 'S',
                                            								V_TYPE2: 'S_RT',
                                            								V_COMP_ID: parent.Ext.getCmp('GCOMP_ID').getValue(),
                                            								V_USR_ID: parent.Ext.getCmp('GUSER_ID').getValue(),
                                            								V_RISK_NO: Ext.getCmp('V_RISK_NO').getValue(),
                                            							},
                                            							callback: function(records,operations,success){
                                            							}
                                            						});
                                                                    
                                                            } else {
                                                    			Ext.Msg.alert('확인', '저장 후 리스크관리번호를 생성하여 진행바랍니다.');
                                                    		}
                                                    		
                                                    	}
                                                    }
                                                }
                                            ]
                                        },
                                        {
                                            xtype: 'container',
                                            flex: 1,
                                            padding: 10,
                                            scrollable: 'vertical',
                                            layout: {
                                                type: 'vbox',
                                                align: 'stretch'
                                            },
                                            items: [
                                                {
                                                    xtype: 'label',
                                                    text: '2) 담보'
                                                },
                                                {
                                                    xtype: 'container',
                                                    items: [
                                                        {
                                                            xtype: 'gridpanel',
                                                            tbar: [
                                                                {
                                                                    xtype: 'label',
                                                                    text: '계약금'
                                                                },
                                                                {
                                                                    id: 'gridAddBtn1',
                                                                    text: '',
                                                                    margin: '0 3 0 0',
                                                                    glyph: 'xf055@FontAwesome',
//                                                                    style: '1px solid lightgray',
                                                                    listeners: {
                                                                    	click:  function(button, e, eOpts) {
                                                                    		if(Ext.getCmp('V_RISK_NO').getValue() != '') {
                                                                    			var store1 = Ext.getStore('MyStore1');
                                                                        		var count = store1.getCount() + 1;
                                                                        		var rec = Ext.create('Y_PUMS_STEEL.model.MyModel', {
                                                                        		});
                                                                        		store1.insert(count, rec);
                                                                    		} else {
                                                                    			Ext.Msg.alert('확인', '저장 후 리스크관리번호를 생성하여 진행바랍니다.');
                                                                    		}
                                                                    		
                                                                    	}
                                                                    }
                                                                },
                                                                {
                                                                    id: 'gridDelBtn1',
                                                                    text: '',
                                                                    margin: '0 3 0 0',
                                                                    glyph: 'xf056@FontAwesome',
//                                                                    iconCls: 'grid-del-btn',
                                                                },
                                                                {
                                                                	id: 'gridSaveBtn1',
                                                                	text: '',
                                                                	margin: '0 3 0 0',
                                                                	glyph: 'xf0c7@FontAwesome',
                                                                	iconCls: 'grid-save-btn',
                                                                },
                                                                {
                                                                    xtype: 'container',
                                                                    flex: 1
                                                                },
                                                                
                                                            ],
                                                            flex: 1,
                                                            style: 'border: 1px solid lightgray;  padding: 5px;',
                                                            header: false,
                                                            title: 'My Grid Panel',
                                                            store: 'MyStore1',
                                                            id: 'myGrid1',
                                                            columns: [
                                                                {
                                                                    xtype: 'rownumberer',
                                                                    width: 40
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'V_TYPE',
                                                                    text: 'V_TYPE',
                                                                    hidden: true
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'R_CR_CD',
                                                                    text: '계약금유형',
                                                                    editor: {
                                                                		xtype: 'combobox',
                                                                		editable: false,
                                                                		displayField: 'DTL_NM',
                                                                		autoLoadOnValue: true,
                                                                		valueField: 'DTL_CD',
                                                                		store: Ext.create('Ext.data.Store',{
                                                                			autoLoad: true,
                                                                			storeId: 'store19',
                                                                			proxy: {
                                                                		           type: 'ajax',
                                                                		           extraParams: {
                                                                		            	V_MAST_CD: 'BA19',
                                                                		            	V_GRID: 'Y'
                                                                		           },	
                                                                		           api: {
                                                                		               read: '/HSPF01/common/sql/Combobox.jsp'
                                                                		           },
                                                                		           reader: {
                                                                		               type: 'json',
                                                                		               rootProperty: 'resultList'
                                                                		           }
                                                                		       }
                                                                		})
                                                                	},
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if(Ext.data.StoreManager.lookup('store19').findRecord('DTL_CD',value) !==null)
                                                                        {
                                                                            return Ext.data.StoreManager.lookup('store19').findRecord('DTL_CD',value).get('DTL_NM');
                                                                        }
                                                                        return value;
                                                                    },
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 180,
                                                                    dataIndex: 'R_COL_CD',
                                                                    text: '담보유형',
                                                                    editor: {
                                                                		xtype: 'combobox',
                                                                		editable: false,
                                                                		displayField: 'DTL_NM',
                                                                		autoLoadOnValue: true,
                                                                		valueField: 'DTL_CD',
                                                                		store: Ext.create('Ext.data.Store',{
                                                                			autoLoad: true,
                                                                			storeId: 'store20',
                                                                			proxy: {
                                                                		           type: 'ajax',
                                                                		           extraParams: {
                                                                		            	V_MAST_CD: 'BA20',
                                                                		            	V_GRID: 'Y'
                                                                		           },	
                                                                		           api: {
                                                                		               read: '/HSPF01/common/sql/Combobox.jsp'
                                                                		           },
                                                                		           reader: {
                                                                		               type: 'json',
                                                                		               rootProperty: 'resultList'
                                                                		           }
                                                                		       }
                                                                		})
                                                                	},
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if(Ext.data.StoreManager.lookup('store20').findRecord('DTL_CD',value) !==null)
                                                                        {
                                                                            return Ext.data.StoreManager.lookup('store20').findRecord('DTL_CD',value).get('DTL_NM');
                                                                        }
                                                                        return value;
                                                                    },
                                                                },
                                                                {
                                                                    xtype: 'numbercolumn',
                                                                    style: 'font-size: 12px; text-align: right; font-weight: bold;',
                                                                    align: 'end',
                                                                    dataIndex: 'R_CR_RATE',
                                                                    text: '%',
                                                                    editor: {
                                                                    	xtype: 'numberfield'
                                                                    }
                                                                },
                                                                {
                                                                	xtype: 'numbercolumn',
                                                                	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                	align: 'end',
                                                                	dataIndex: 'R_CR_AMT',
                                                                	text: '금액',
                                                                	editor: {
                                                                		xtype: 'numberfield'
                                                                	},
                                                                    hidden: true
                                                                },
                                                                {
                                                                	xtype: 'gridcolumn',
                                                                	style: 'font-size: 12px; font-weight: bold; text-align: center',
                                                                	dataIndex: 'REMARK',
                                                                	text: '비고',
                                                                	width: 200,
                                                                	editor: {
                                                                		xtype: 'textfield'
                                                                	}
                                                                }
                                                            ],
                                                            viewConfig: {
                                                            },
                                                            selModel: {
                                                                selType: 'checkboxmodel',
                                                                checkOnly: true,                                                              
                                                                listeners: {
                                                              	select: function(rowmodel, record, index, eOpts) {
                                                                  	record.set('V_TYPE', 'V');
                                                                  },
                                                                  deselect: function(rowmodel, record, index, eOpts) {
                                                                  	record.set('V_TYPE', '');
                                                                  }
                                                              }
                                                          },
                                                            plugins: [
                                                                {
                                                                    ptype: 'gridexporter'
                                                                },
                                                                {
                                                                    ptype: 'cellediting',
                                                                    listeners: {
                                                                    	edit: function(editor, context, eOpts) {
                                                                    		var selModel = Ext.getCmp('myGrid1').getSelectionModel();
                                                                    		selModel.select(context.record, true);
                                                                    	}
                                                                    	}
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    items: [
                                                        {
                                                            xtype: 'gridpanel',
                                                            tbar: [
                                                                {
                                                                    xtype: 'label',
                                                                    text: '외상'
                                                                },
                                                                {
                                                                    id: 'gridAddBtn2',
                                                                    text: '',
                                                                    margin: '0 3 0 0',
                                                                    glyph: 'xf055@FontAwesome',
//                                                                    iconCls: 'grid-add-btn',
                                                                    listeners: {
                                                                    	click:  function(button, e, eOpts) {
                                                                    		if(Ext.getCmp('V_RISK_NO').getValue() != '') {
                                                                    			var store2 = Ext.getStore('MyStore2');
                                                                        		var count = store2.getCount() + 1;
                                                                        		var rec = Ext.create('Y_PUMS_STEEL.model.MyModel', {
                                                                        		});
                                                                        		store2.insert(count, rec);
                                                                    		} else {
                                                                    			Ext.Msg.alert('확인', '저장 후 리스크관리번호를 생성하여 진행바랍니다.');
                                                                    		}
                                                                    		
                                                                    	}
                                                                    }
                                                                },
                                                                {
                                                                    id: 'gridDelBtn2',
                                                                    text: '',
                                                                    margin: '0 3 0 0',
                                                                    glyph: 'xf056@FontAwesome',
//                                                                    iconCls: 'grid-del-btn',
                                                                },
                                                                {
                                                                	id: 'gridSaveBtn2',
                                                                	text: '',
                                                                	margin: '0 3 0 0',
                                                                	glyph: 'xf0c7@FontAwesome',
                                                                	iconCls: 'grid-save-btn',
                                                                },
                                                                {
                                                                    xtype: 'container',
                                                                    flex: 1
                                                                },
                                                                
                                                            ],
                                                            style: 'border: 1px solid lightgray; border-bottom: 1px solid lightgray; padding: 5px; margin-top: 5px',
                                                            header: false,
                                                            title: 'My Grid Panel',
                                                            id: 'myGrid2',
                                                            store: 'MyStore2',
                                                            columns: [
                                                                {
                                                                    xtype: 'rownumberer',
                                                                    width: 40
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'V_TYPE',
                                                                    text: 'V_TYPE',
                                                                    hidden: true
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'R_BN_TYPE',
                                                                    text: '외상유형',
                                                                    editor: {
                                                                		xtype: 'combobox',
                                                                		editable: false,
                                                                		displayField: 'DTL_NM',
                                                                		autoLoadOnValue: true,
                                                                		valueField: 'DTL_CD',
                                                                		store: Ext.create('Ext.data.Store',{
                                                                			autoLoad: true,
                                                                			storeId: 'store21',
                                                                			proxy: {
                                                                		           type: 'ajax',
                                                                		           extraParams: {
                                                                		            	V_MAST_CD: 'BA21',
                                                                		            	V_GRID: 'Y'
                                                                		           },	
                                                                		           api: {
                                                                		               read: '/HSPF01/common/sql/Combobox.jsp'
                                                                		           },
                                                                		           reader: {
                                                                		               type: 'json',
                                                                		               rootProperty: 'resultList'
                                                                		           }
                                                                		       }
                                                                		})
                                                                	},
                                                                    renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                        if(Ext.data.StoreManager.lookup('store21').findRecord('DTL_CD',value) !==null)
                                                                        {
                                                                            return Ext.data.StoreManager.lookup('store21').findRecord('DTL_CD',value).get('DTL_NM');
                                                                        }
                                                                        return value;
                                                                    },
                                                                },
                                                                {
                                                                    xtype: 'numbercolumn',
                                                                    style: 'font-size: 12px; font-weight: bold; text-align: center',
                                                                    align: 'end',
                                                                    dataIndex: 'MORTGAGE_AMT',
                                                                    text: '담보금액',
                                                                    format: '0,000.00',
                                                                    editor: {
                                                                    	xtype: 'numberfield'
                                                                    },
                                                                    width: 140,
                                                                    summaryType: 'sum',
                                                                    summaryRenderer: function(value, summaryData, dataIndex) {
                                                                        return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                                                                    }
                                                                },
                                                                {
                                                                	xtype: 'numbercolumn',
                                                                	style: 'font-size: 12px; font-weight: bold; text-align: center',
                                                                	align: 'end',
                                                                	dataIndex: 'CREDIT_AMT',
                                                                	text: '외상금액',
                                                                	format: '0,000.00',
                                                                	editor: {
                                                                		xtype: 'numberfield'
                                                                	},
                                                                    width: 140,
                                                                    summaryType: 'sum',
                                                                    summaryRenderer: function(value, summaryData, dataIndex) {
                                                                        return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                                                                    }
                                                                },
                                                                {
                                                                	xtype: 'numbercolumn',
                                                                	style: 'font-size: 12px; font-weight: bold; text-align: center',
                                                                	align: 'end',
                                                                	dataIndex: 'LOAN_RT',
                                                                	text: '여신이자율(%)',
                                                                	format: '0,000.00',
                                                                	editor: {
                                                                		xtype: 'numberfield'
                                                                	},
                                                                },
                                                                {
                                                                	xtype: 'gridcolumn',
                                                                	style: 'font-size: 12px; font-weight: bold; text-align: center',
                                                                	dataIndex: 'REMARK',
                                                                	text: '비고',
                                                                	width: 200,
                                                                	editor: {
                                                                		xtype: 'textfield'
                                                                	}
                                                                }
                                                            ],
                                                            viewConfig: {
                                                            },
                                                            selModel: {
                                                                selType: 'checkboxmodel',
                                                                checkOnly: true,
                                                                listeners: {
                                                                	select: function(rowmodel, record, index, eOpts) {
                                                                    	record.set('V_TYPE', 'V');
                                                                    },
                                                                    deselect: function(rowmodel, record, index, eOpts) {
                                                                    	record.set('V_TYPE', '');
                                                                    }
                                                                }
                                                            },
                                                            plugins: [
                                                                {
                                                                    ptype: 'gridexporter'
                                                                },
                                                                {
                                                                    ptype: 'cellediting',
                                                                    listeners: {
                                                                    	edit: function(editor, context, eOpts) {
                                                                    		var selModel = Ext.getCmp('myGrid2').getSelectionModel();
                                                                    		selModel.select(context.record, true);
                                                                    	}
                                                                	}
                                                                }
                                                            ],
                                                            features: [
                                                                       {
                                                                           ftype: 'summary'
                                                                       }
                                                            ],
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    padding: 10,
                                                    layout: {
                                                    	type: 'hbox',
                                                		align: 'stretch'
                                                    },
                                                    style: 'border: 1px solid lightgray; border-bottom: 1px solid lightgray; padding: 5px; margin-top: 5px',
                                                    items: [
                                                        {
                                                            xtype: 'textfield',
                                                            maxWidth: 220,
                                                            minWidth: 220,
                                                            width: 220,
                                                            id: 'V_HEDGE_AMT',
                                                            fieldLabel: '3) 환헷지',
                                                            labelWidth: 90,
                                                            fieldStyle: 'text-align: right;',
                                                            value: 0,
                                                            hidden: true
                                                        },
                                                        {
                                                            xtype: 'combobox',
                                                            id: 'V_HEDGE_TYPE',
                                                            fieldLabel: '3) 환헷지',
                                                            labelWidth: 90,
//                                                            fieldStyle: 'text-align: right;',
                                                            maxWidth: 300,
                                                            minWidth: 300,
                                                            width: 300,
                                                            displayField: 'DTL_NM',
                                                            valueField: 'DTL_CD',
                                                            editable: false,
                                                            store: Ext.create('Ext.data.Store',{
                                                          		autoLoad: true,
                                                          		storeId: 'store40',
                                                          		proxy: {
                                                                      type: 'ajax',
                                                                      extraParams: {
                                                                       	V_MAST_CD: 'BA30',
                                                                       	V_GRID: 'Y'
                                                                      },	
                                                                      api: {
                                                                          read: '/HSPF01/common/sql/Combobox.jsp'
                                                                      },
                                                                      reader: {
                                                                          type: 'json',
                                                                          rootProperty: 'resultList'
                                                                      }
                                                                  }
                                                          	}),
                                                        
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    items: [
                                                        {
                                                            xtype: 'gridpanel',
                                                            tbar: [
                                                                {
                                                                    xtype: 'label',
                                                                    text: '4) 이자(기간,연체)'
                                                                },
                                                                {
                                                                    id: 'gridAddBtn3',
                                                                    text: '',
                                                                    margin: '0 3 0 0',
                                                                    glyph: 'xf055@FontAwesome',
//                                                                    iconCls: 'grid-add-btn',
                                                                    listeners: {
                                                                    	click:  function(button, e, eOpts) {
                                                                    		if(Ext.getCmp('V_RISK_NO').getValue() != '') {
                                                                    			var store3 = Ext.getStore('MyStore3');
                                                                        		var count = store3.getCount() + 1;
                                                                        		var rec = Ext.create('Y_PUMS_STEEL.model.MyModel', {
                                                                        		});
                                                                        		store3.insert(count, rec);
                                                                    		} else {
                                                                    			Ext.Msg.alert('확인', '저장 후 리스크관리번호를 생성하여 진행바랍니다.');
                                                                    		}
                                                                    		
                                                                    	}
                                                                    }
                                                                },
                                                                {
                                                                    id: 'gridDelBtn3',
                                                                    text: '',
                                                                    margin: '0 3 0 0',
                                                                    glyph: 'xf056@FontAwesome',
//                                                                    iconCls: 'grid-del-btn',
                                                                },
                                                                {
                                                                	id: 'gridSaveBtn3',
                                                                	text: '',
                                                                	margin: '0 3 0 0',
                                                                	glyph: 'xf0c7@FontAwesome',
                                                                	iconCls: 'grid-save-btn',
                                                                },
                                                                {
                                                                    xtype: 'container',
                                                                    flex: 1
                                                                },
                                                                
                                                            ],
                                                            flex: 1,
//                                                            height: 150,
//                                                            maxHeight: 150,
//                                                            minHeight: 150,
                                                            style: 'border: 1px solid lightgray; border-bottom: 1px solid lightgray; padding: 5px; margin-top: 5px',
                                                            header: false,
                                                            title: 'My Grid Panel',
                                                            id: 'myGrid3',
                                                            store: 'MyStore3',
                                                            columns: [
                                                                {
                                                                    xtype: 'rownumberer',
                                                                    width: 40
                                                                },
                                                                {
                                                                    xtype: 'gridcolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'V_TYPE',
                                                                    text: 'V_TYPE',
                                                                    hidden: true
                                                                },
                                                                {
                                                                	xtype: 'gridcolumn',
                                                                	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                	width: 80,
                                                                	dataIndex: 'R_RT_STATUS',
                                                                	text: '상태',
                                                                	align :'center',
                                                                	 editor: {
                                                                 		xtype: 'combobox',
                                                                 		editable: false,
                                                                 		displayField: 'DTL_NM',
                                                                 		autoLoadOnValue: true,
                                                                 		valueField: 'DTL_CD',
                                                                 		store: Ext.create('Ext.data.Store',{
                                                                 			autoLoad: true,
                                                                 			storeId: 'store32',
                                                                 			proxy: {
                                                                 		           type: 'ajax',
                                                                 		           extraParams: {
                                                                 		            	V_MAST_CD: 'BA32',
                                                                 		            	V_GRID: 'Y'
                                                                 		           },	
                                                                 		           api: {
                                                                 		               read: '/HSPF01/common/sql/Combobox.jsp'
                                                                 		           },
                                                                 		           reader: {
                                                                 		               type: 'json',
                                                                 		               rootProperty: 'resultList'
                                                                 		           }
                                                                 		       }
                                                                 		})
                                                                 	},
                                                                     renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                         if(Ext.data.StoreManager.lookup('store32').findRecord('DTL_CD',value) !==null)
                                                                         {
                                                                             return Ext.data.StoreManager.lookup('store32').findRecord('DTL_CD',value).get('DTL_NM');
                                                                         }
                                                                         return value;
                                                                     },
                                                                },
                                                                {
                                                                	xtype: 'gridcolumn',
                                                                	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                	width: 80,
                                                                	dataIndex: 'R_RT_STATUS_DT',
                                                                	text: '구분',
                                                                	align :'center',
                                                                	editor: {
                                                                		xtype: 'combobox',
                                                                		editable: false,
                                                                		displayField: 'DTL_NM',
                                                                		autoLoadOnValue: true,
                                                                		valueField: 'DTL_CD',
                                                                		store: Ext.create('Ext.data.Store',{
                                                                			autoLoad: true,
                                                                			storeId: 'store41',
                                                                			proxy: {
                                                                				type: 'ajax',
                                                                				extraParams: {
                                                                					V_MAST_CD: 'BA41',
                                                                					V_GRID: 'Y'
                                                                				},	
                                                                				api: {
                                                                					read: '/HSPF01/common/sql/Combobox.jsp'
                                                                				},
                                                                				reader: {
                                                                					type: 'json',
                                                                					rootProperty: 'resultList'
                                                                				}
                                                                			}
                                                                		})
                                                                	},
                                                                	renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                                                		if(Ext.data.StoreManager.lookup('store41').findRecord('DTL_CD',value) !==null)
                                                                		{
                                                                			return Ext.data.StoreManager.lookup('store41').findRecord('DTL_CD',value).get('DTL_NM');
                                                                		}
                                                                		return value;
                                                                	},
                                                                },
                                                                {
                                                                    xtype: 'numbercolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'R_RT_FR',
                                                                    text: 'FROM',
                                                                    align: 'center',
                                                                    editor: {
                                                                    	xtype: 'numberfield'
                                                                    },
                                                                    format: '0,000'
                                                                },
                                                                {
                                                                    xtype: 'numbercolumn',
                                                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                                                    width: 114,
                                                                    dataIndex: 'R_RT_TO',
                                                                    text: 'TO',
                                                                    align: 'center',
                                                                    editor: {
                                                                    	xtype: 'numberfield'
                                                                    },
                                                                    format: '0,000'
                                                                },
                                                                {
                                                                    xtype: 'numbercolumn',
                                                                    style: 'font-size: 12px; text-align: right; font-weight: bold;',
                                                                    align: 'end',
                                                                    dataIndex: 'R_RT_RATE',
                                                                    text: '%',
                                                                    editor: {
                                                                    	xtype: 'numberfield'
                                                                    }
                                                                },
                                                                {
                                                                	xtype: 'gridcolumn',
                                                                	style: 'font-size: 12px; font-weight: bold; text-align: center',
                                                                	dataIndex: 'REMARK',
                                                                	text: '비고',
                                                                	width: 200,
                                                                	editor: {
                                                                		xtype: 'textfield'
                                                                	}
                                                                }
                                                            ],
                                                            viewConfig: {
                                                            },
                                                            selModel: {
                                                                selType: 'checkboxmodel',
                                                                checkOnly: true,
                                                                listeners: {
                                                                	select: function(rowmodel, record, index, eOpts) {
                                                                    	record.set('V_TYPE', 'V');
                                                                    },
                                                                    deselect: function(rowmodel, record, index, eOpts) {
                                                                    	record.set('V_TYPE', '');
                                                                    }
                                                                }
                                                            },
                                                            plugins: [
                                                                {
                                                                    ptype: 'gridexporter'
                                                                },
                                                                {
                                                                    ptype: 'cellediting',
                                                                    listeners: {
                                                                    	edit: function(editor, context, eOpts) {
                                                                    		var selModel = Ext.getCmp('myGrid3').getSelectionModel();
                                                                    		selModel.select(context.record, true);
                                                                    	}
                                                                	}
                                                                }
                                                            ]
                                                        }
                                                    ]
                                                },
                                                {
                                                    xtype: 'container',
                                                    dock: 'left',
                                                    padding: 10,
                                                    width: 100,
                                                    style: 'border: 1px solid lightgray; border-bottom: 1px solid lightgray; padding: 5px; margin-top: 5px',
                                                    items: [
                                                        {
                                                            xtype: 'textfield',
                                                            maxWidth: 700,
                                                            minWidth: 700,
                                                            width: 700,
                                                            fieldLabel: '5) 기타',
                                                            labelWidth: 90,
                                                            id: 'V_REMARK'
                                                        }
                                                    ]
                                                }
                                            ]
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'splitter',
                    collapseTarget: 'prev'
                },
                {
                    xtype: 'container',
                    flex: 0.5,
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    }
                }
            ]
        }
    ]

});