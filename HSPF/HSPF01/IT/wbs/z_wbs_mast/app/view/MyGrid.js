/*
 * File: app/view/MyGrid.js
 *
 * This file was generated by Sencha Architect version 4.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Z_WBS_MAST.view.MyGrid', {
	extend : 'Ext.grid.Panel',
	alias : 'widget.myGrid',

	requires : [ 'Z_WBS_MAST.view.MyGridViewModel', 'Ext.view.Table', 'Ext.grid.column.RowNumberer', 'Ext.grid.column.Number', 'Ext.grid.column.Date', 'Ext.selection.CheckboxModel', 'Ext.grid.plugin.Exporter', 'Ext.grid.plugin.CellEditing' ],
	viewModel : {
		type : 'mygrid'
	},
	id : 'myGrid',
	store : 'MyStore',
	style : 'border: 1px solid lightgray; padding: 5px;',
	title : 'My Grid Panel',
	header : false,

	config : {
		tbar : [ {
			id : 'gridAddBtn',
			text : '',
			margin : '0 3 0 0',
			glyph : 'xf055@FontAwesome',
			iconCls : 'grid-add-btn',
		}, {
			id : 'gridDelBtn',
			text : '',
			margin : '0 3 0 0',
			glyph : 'xf056@FontAwesome',
			iconCls : 'grid-del-btn',
		}, {
			xtype : 'container',
			flex : 1
		}, {
			xtype : 'button',
			glyph : 'xf1c3@FontAwesome',
			id : 'xlsxDown',
			cfg : {
				type : 'excel07',
				ext : 'xlsx'
			},
			iconCls : 'grid-excel-btn',
			margin : '0 3 0 0',
		} ]
	},
	columns : [ {
		xtype : 'rownumberer',
		width : 40,
		locked : true,
	}, {
		xtype : 'gridcolumn',
		text : 'COMP_ID',
		hidden : true,
	}, {
		xtype : 'gridcolumn',
		text : 'SEQ',
		hidden : true,
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 100,
		dataIndex : 'SYS_TYPE',
		text : '시스템명',
		locked : true,
		renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
			if (Ext.data.StoreManager.lookup('IT01Store').findRecord('DTL_CD', value) !== null) {
				return Ext.data.StoreManager.lookup('IT01Store').findRecord('DTL_CD', value).get('DTL_NM');
			}
			return value;
		},
		editor : {
			xtype : 'combobox',
			displayField : 'DTL_NM',
			autoLoadOnValue : true,
			valueField : 'DTL_CD',
			editable : false,
			store : Ext.create('Ext.data.Store', {
				autoLoad : true,
				storeId : 'IT01Store',
				proxy : {
					type : 'ajax',
					extraParams : {
						V_MAST_CD : 'IT01',
						V_GRID : 'Y'
					},
					api : {
						read : '/HSPF01/common/sql/Combobox.jsp'
					},
					reader : {
						type : 'json',
						rootProperty : 'resultList'
					}
				}
			}),
		}
	}, {
		xtype : 'gridcolumn',
		dataIndex : 'MODULE_TYPE',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		text : '서브모듈',
		locked : true,
		width : 150,
		maxlength : 50,
		editor : {
			xtype : 'textfield',
		},
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 150,
		maxlength : 50,
		locked : true,
		dataIndex : 'PGM_NM',
		text : '프로그램명',
		editor : {
			xtype : 'textfield',
		},
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 200,
		maxlength : 50,
		dataIndex : 'PGM_ID',
		text : '프로그램ID',
		editor : {
			xtype : 'textfield',
		},
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 100,
		maxlength : 50,
		dataIndex : 'CRUD',
		text : '구분',
		editor : {
			xtype : 'textfield',
		},
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 100,
		dataIndex : 'IF_YN',
		text : 'I/F대상',
		editor : {
			xtype : 'combobox',
			displayField : 'DTL_NM',
			valueField : 'DTL_CD',
			value : "N",
			store : Ext.create('Ext.data.Store', {
				storeId : 'YNStore',
				fields : [ 'DTL_CD', 'DTL_NM' ],
				data : [ {
					"DTL_CD" : "Y",
					"DTL_NM" : "유"
				}, {
					"DTL_CD" : "N",
					"DTL_NM" : "무"
				} ]
			}),
		},
		renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
			if (Ext.data.StoreManager.lookup('YNStore').findRecord('DTL_CD', value) !== null) {
				return Ext.data.StoreManager.lookup('YNStore').findRecord('DTL_CD', value).get('DTL_NM');
			}
			return value;
		},
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 100,
		maxlength : 50,
		dataIndex : 'DEV_USR_NM',
		text : '개발자',
		editor : {
			xtype : 'textfield',
		},
	}, {
		xtype : 'numbercolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 100,
		dataIndex : 'PRIORITY',
		align : 'right',
		text : '우선순위',
		format : '0',
		editor : {
			xtype : 'numberfield',
			minValue : 0,
		},
	}, {
		xtype : 'gridcolumn',
		header : '요청/설계(현업)',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #000000',
		columns : [ {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'REQ_PLAN_DT',
			text : '예정일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
		}, {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'REQ_END_DT',
			text : '완료일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
		} ],
	}, {
		xtype : 'gridcolumn',
		header : '설계(시스템)',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #000000',
		columns : [ {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'DESIGN_PLAN_DT',
			text : '예정일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		}, {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'DESIGN_END_DT',
			text : '완료일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		} ],
	}, {
		xtype : 'gridcolumn',
		header : '프로그램개발',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #000000',
		columns : [ {
			xtype : 'numbercolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			align : 'right',
			width : 100,
			dataIndex : 'DEV_DAY',
			text : '공수(day)',
			format : '0',
			editor : {
				xtype : 'numberfield',
				minValue : 0,
			},
		}, {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'DEV_PLAN_DT',
			text : '예정일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		}, {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'DEV_END_DT',
			text : '완료일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		} ],
	}, {
		xtype : 'gridcolumn',
		header : '테스트',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #000000',
		columns : [ {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'TEST_PLAN_DT',
			text : '예정일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		}, {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'TEST_END_DT',
			text : '완료일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		} ],
	}, {
		xtype : 'gridcolumn',
		header : '검증',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #000000',
		columns : [ {
			xtype : 'datecolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			align : 'center',
			dataIndex : 'VALID_END_DT',
			text : '완료일',
			format : 'Y-m-d',
			editor : {
				xtype : 'datefield',
				align : 'center',
				format : 'Y-m-d',
			},
			emptyCellText : ''
		}, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
			width : 100,
			maxlength : 50,
			dataIndex : 'VALID_USR_NM',
			text : '담당자',
			editor : {
				xtype : 'textfield',
			}
		} ],
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 100,
		dataIndex : 'COMPLETE_YN',
		text : '완료유무',
		editor : {
			xtype : 'combobox',
			editable : false,
			displayField : 'DTL_NM',
			valueField : 'DTL_CD',
			value : "N",
			store : Ext.create('Ext.data.Store', {
				storeId : 'YNStore',
				fields : [ 'DTL_CD', 'DTL_NM' ],
				data : [ {
					"DTL_CD" : "Y",
					"DTL_NM" : "유"
				}, {
					"DTL_CD" : "N",
					"DTL_NM" : "무"
				} ]
			}),
		},
		renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
			if (Ext.data.StoreManager.lookup('YNStore').findRecord('DTL_CD', value) !== null) {
				return Ext.data.StoreManager.lookup('YNStore').findRecord('DTL_CD', value).get('DTL_NM');
			}
			return value;
		},
	}, {
		xtype : 'gridcolumn',
		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
		width : 200,
		dataIndex : 'REMARK',
		maxlength : 50,
		text : '비고사항',
		editor : {
			xtype : 'textfield',
		}
	}, ],
	viewConfig : {
		enableTextSelection : true,
		getRowClass : function(record, rowIndex, rowParams, store) {
			function setDateFormat(date)
			{
				var year = date.getFullYear();
				var month = (1 + date.getMonth());
				month = month >= 10 ? month : '0' + month;
				var day = date.getDate();
				day = day >= 10 ? day : '0' + day;
				date = year + '-' + month + '-' + day;
				return date;
			}
			if (record.get('COMPLETE_YN') == 'Y') {
				return 'bg-gray';
			}
			if (record.get('DEV_PLAN_DT') != undefined) {
				var date = new Date();
				var DEV_PLAN_DT = new Date(record.get('DEV_PLAN_DT'));
				if (setDateFormat(date) >= setDateFormat(DEV_PLAN_DT)) {
					if (record.get('DEV_END_DT') == undefined)
						return 'bg-yellow';
				}
			}
		},
	},
	selModel : {
		selType : 'checkboxmodel',
		mode : 'MULTI',
		listeners : {}
	},
	features : [ {
		ftype : 'summary',
		dock : 'bottom'
	} ],
	plugins : [ {
		ptype : 'gridexporter'
	}, {
		ptype : 'cellediting',
		clicksToEdit : 1,
		listeners : {}
	}, {
		ptype : 'clipboard',
	}, {
		ptype : 'gridfilters'
	}, ],

});