/*
 * File: app/view/MyPanel1.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('S_DN_PAPER.view.MyPanel1', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.mypanel11',

    requires: [
        'S_DN_PAPER.view.MyPanel1ViewModel',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.view.Table',
        'Ext.selection.CheckboxModel',
        'Ext.grid.plugin.Exporter',
        'Ext.grid.plugin.CellEditing',
        'Ext.grid.column.Number'
    ],

    viewModel: {
        type: 'mypanel11'
    },
    layout: 'fit',
    title: 'Tab 2',

    items: [
        {
            xtype: 'container',
            flex: 1,
            layout: {
                type: 'vbox',
                align: 'stretch'
            },
            items: [
                {
                    xtype: 'gridpanel',
                    flex: 1,
                    style: 'border: 1px solid lightgray; padding: 5px;',
                    header: false,
                    title: 'My Grid Panel',
                    store: 'MyStore1',
                    id: 'myGrid1',
                    tbar: [
                       {
                    	   id: 'sendBtn',
                    	   text: '',
                    	   margin: '0 3 0 0',
                    	   style: 'background-color: white; border: 0.5px solid #3367d6;',
                    	   cls: 'blue-btn',
                    	   text: '요청서발송',
                       },
                       {
                    	   id: 'sendCancelBtn',
                    	   text: '',
                    	   margin: '0 3 0 0',
                    	   style: 'background-color: white; border: 0.5px solid #3367d6;',
                    	   cls: 'blue-btn',
                    	   text: '승인취소요청서발송',
//                    	   hidden: true
                       },
                       {
                    	   id: 'cfmBtn',
                    	   text: '',
                    	   margin: '0 3 0 0',
                    	   style: 'background-color: white; border: 0.5px solid #3367d6;',
                    	   cls: 'blue-btn',
                    	   text: '요청서승인/취소',
                    	   hidden: true
                       },
                       {
	                       	id: 'printBtn',
	                       	text: '',
	                       	margin: '0 3 0 0',
	                        glyph: 'xf02f@FontAwesome',
	                        iconCls: 'grid-print-btn',
                    	},
                        {
                            id: 'gridDelBtn',
                            text: '',
                            margin: '0 3 0 0',
                            glyph: 'xf056@FontAwesome',
                            iconCls: 'grid-del-btn',
                        },
                        {
                            xtype: 'container',
                            flex: 1
                        },
                        {
                          xtype: 'button',
                          glyph: 'xf1c3@FontAwesome',
                          id: 'xlsxDown',
                          cfg: {
                              type: 'excel07',
                              ext: 'xlsx'
                          },
                          iconCls: 'grid-excel-btn',
                          margin: '0 3 0 0'
                	  }
                    ],
                    columns: [
                        {
                            xtype: 'rownumberer',
                            width: 40
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'V_TYPE',
                            text: 'V_TYPE',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'MAIL_YN',
                            text: '요청서발송',
                            align: 'center',
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'REQ_CFM_YN',
                            text: '요청서승인유무',
                            align: 'center'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 100,
                            dataIndex: 'CFM_YN',
                            text: '출하승인',
                            align: 'center'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 100,
                            dataIndex: 'BILL_YN',
                            text: '매출생성',
                            align: 'center'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 120,
                            dataIndex: 'PRINT_NO',
                            text: '출하요청서<br>관리번호'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'DN_TYPE',
                            text: '요청서유형'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'DN_REQ_NO',
                            text: '출하요청서번호'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'SL_NM',
                            text: '수신'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'BP_CD',
                            text: '매출처',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 200,
                            dataIndex: 'BP_NM',
                            text: '매출처명'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                        	width: 114,
                        	dataIndex: 'DESTINATION',
                        	text: '착지',
                        	editor: { 
                            	xtype: 'textfield'
                            }
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                        	width: 114,
                        	dataIndex: 'DN_REMARK',
                        	text: '출하비고',
                        	editor: {
                            	xtype: 'textfield'
                            }
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'NAME1',
                            text: '발신자'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'REQ_CFM_USER',
                            text: '결재자',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'NAME2',
                            text: '결재자'
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 130,
                            dataIndex: 'IN_AMT',
                            text: '입금금액',
                            format: '0,000',
                            align: 'right'
                        }, 
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6; ',
                            width: 300,
                            dataIndex: 'REMARK', 
                            text: '비고',
                            editor: {
                            	xtype: 'textfield'
                            }
                        },
                    ],
                    viewConfig: {
                    	enableTextSelection: true,
                    },
                    selModel: {
                        selType: 'checkboxmodel',
                        listeners: {
                        	select: function(rowmodel, record, index, eOpts) {
                    			record.set('V_TYPE', 'V');
                            },
                            deselect: function(rowmodel, record, index, eOpts) {
                    			record.set('V_TYPE', '');
                            }
                        }
                    },
                    plugins: [
                        {
                            ptype: 'gridexporter'
                        },
                        {
                            ptype: 'cellediting',
                            clicksToEdit: 1,
                        }
                    ],
                },
                {
                    xtype: 'gridpanel',
                    flex: 1,
                    style: 'border: 1px solid lightgray; padding: 5px;',
                    header: false,
                    title: 'My Grid Panel',
                    store: 'MyStore2',
                    id: 'myGrid2',
                    tbar: [
                            {
                                id: 'gridDelBtn1',
                                text: '',
                                margin: '0 3 0 0',
                                glyph: 'xf056@FontAwesome',
                                iconCls: 'grid-del-btn',
                                hidden: true,
                            },
                            {
                                xtype: 'container',
                                flex: 1
                            },
                            {
                                id: 'saveAddPriceBtn',
                                style: 'background-color: white; border: 0.5px solid #3367d6;',
                         	    cls: 'blue-btn',
                                text: '추가매출단가 저장',
                            },
                            {
                            	xtype: 'container',
                            	flex: 1,
                            	layout:{
                            		type: 'hbox',
                                    align: 'stretch'
                            	},
                            	items: [
                            		{
                                        xtype: 'container',
                                        flex: 1
                                    },
                            		{
                                    	xtype: 'label',
                                    	text: '추가매출단가 변경 후 반드시 저장을 눌러주세요. (VAT 별도)'
                                    },
                                    
                            	]
                            },
                            {
                                xtype: 'button',
                                glyph: 'xf1c3@FontAwesome',
                                id: 'xlsxDown11',
                                cfg: {
                                    type: 'excel07',
                                    ext: 'xlsx'
                                },
                                iconCls: 'grid-excel-btn',
                                margin: '0 3 0 0'
                      	  }
                            
                        ],
                    columns: [
                        {
                            xtype: 'rownumberer',
                            width: 40
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'V_TYPE',
                            text: 'V_TYPE',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 100,
                            dataIndex: 'ITEM_CD',
                            text: '품번',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold; ',
                            text: '구매유형',
                            width: 100,
                            dataIndex: 'SALE_TYPE',
                            editor: {
                        		xtype: 'combobox',
                        		editable: false,
                        		displayField: 'DTL_NM',
                        		autoLoadOnValue: true,
                        		valueField: 'DTL_CD',
                        		store: Ext.create('Ext.data.Store',{
                        			autoLoad: true,
                        			storeId: 'sl_combo2',
                        			proxy: {
                        		           type: 'ajax',
                        		           extraParams: {
                        		            	V_MAST_CD: 'BA10',
                        		            	V_GRID: 'Y'
                        		           },	
                        		           api: {
                        		               read: '/HSPF01/common/sql/Combobox.jsp'
                        		           },
                        		           reader: {
                        		               type: 'json',
                        		               rootProperty: 'resultList'
                        		           }
                        		       }
                        		})
                        	},
                            renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                                if(Ext.data.StoreManager.lookup('sl_combo2').findRecord('DTL_CD',value) !==null)
                                {
                                    return Ext.data.StoreManager.lookup('sl_combo2').findRecord('DTL_CD',value).get('DTL_NM');
                                }
                                return value;
                            },
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold; ',
                            width: 150,
                            dataIndex: 'BL_DOC_NO',
                            text: 'B/L번호',
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 150,
                        	dataIndex: 'ITEM_CD',
                        	text: '품목코드'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 150,
                            dataIndex: 'ITEM_NM',
                            text: '품명'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 80,
                            align: 'center',
                            dataIndex: 'ST_TYPE_NM',
                            text: '강종'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 80,
                        	align: 'center',
                        	dataIndex: 'SPEC1',
                        	text: '스펙1'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 80,
                        	align: 'center',
                        	dataIndex: 'SPEC2',
                        	text: '스펙2'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 80,
                        	align: 'center',
                        	dataIndex: 'SPEC3',
                        	text: '스펙3'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 80,
                        	align: 'center',
                        	dataIndex: 'SPEC4',
                        	text: '스펙4'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 102,
                            dataIndex: 'BRAND',
                            text: '브랜드',
                            hidden: true
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            text: '재고BON수량',
                            dataIndex: 'BON_QTY',
                            format: '0,000',
                            align: 'right',
                            width: 120,
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                            
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            text: '출하요청BON수량',
                            format: '0,000',
                            dataIndex: 'DN_BON_QTY',
                            align: 'right',
                            width: 140,
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	text: 'B/L중량',
                        	format: '0,000.00',
                        	dataIndex: 'DN_QTY',
                        	align: 'right',
                        	width: 140,
                        	summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                            },
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	text: '매출단가',
                        	format: '0,000.000',
                        	dataIndex: 'DN_PRC_NON_INTEREST',
                        	align: 'right',
                        	hidden: true,
                        	width: 140
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	text: 'B/L매출금액',
                        	format: '0,000',
                        	dataIndex: 'DN_AMT_NON_INTEREST',
                        	align: 'right',
                        	hidden: true,
                        	width: 160,
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	text: '매출단가(이자포함)',
                        	format: '0,000.000',
                        	dataIndex: 'DN_PRC',
                        	align: 'right',
                        	width: 140
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	text: 'B/L매출금액(이자포함)',
                        	format: '0,000',
                        	dataIndex: 'DN_AMT',
                        	align: 'right',
                        	width: 160,
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6; ',
                            align: 'end',
                            dataIndex: 'ADD_DN_PRC',
                            text: '추가매출단가',
                        	format: '0,000.000',
                            editor: {
                            	xtype: 'numberfield',
                            	decimalPrecision: 3,
                            },
                            
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;  color: #3367d6;',
                            align: 'end',
                            dataIndex: 'ADD_DN_AMT',
                            text: '추가매출금액',
                            format: '0,000.',
                            editor: {
                            	xtype: 'numberfield'
                            },
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                        },
                        {
                    		xtype : 'gridcolumn',
                    		style : 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
                    		width : 130,
                    		dataIndex : 'CALC_INTER_YN',
                    		text : '추가이자계산여부',
                    		align: 'center',
                    		editor : {
                    			xtype : 'combobox',
                    			displayField : 'DTL_NM',
                    			valueField : 'DTL_CD',
                    			value : 'N',
                    			editable : false,
                    			store : Ext.create('Ext.data.Store', {
                    				storeId : 'YNStore',
                    				fields : [ 'DTL_CD', 'DTL_NM' ],
                    				data : [ {
                    					"DTL_CD" : "Y",
                    					"DTL_NM" : "여"
                    				}, {
                    					"DTL_CD" : "N",
                    					"DTL_NM" : "부"
                    				} ]
                    			}),
                    		},
                    		renderer : function(value, metaData, record, rowIndex, colIndex, store, view) {
                    			if (Ext.data.StoreManager.lookup('YNStore').findRecord('DTL_CD', value) !== null) {
                    				return Ext.data.StoreManager.lookup('YNStore').findRecord('DTL_CD', value).get('DTL_NM');
                    			}
                    			return value;
                    		},
                    	},
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold; ',
                        	align: 'end',
                        	dataIndex: 'ADD_INTER_AMT',
                        	text: '추가이자금액',
                        	format: '0,000',
//                        	editor: {
//                        		xtype: 'numberfield'
//                        	},
                        	summaryType: 'sum',
                        	summaryRenderer: function(value, summaryData, dataIndex) {
                        		return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                        	},
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            align: 'end',
                            dataIndex: 'TOTAL_DN_AMT_NON_INTEREST',
                            text: '총 매출금액',
                            hidden: true,
                            format: '0,000.',
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	align: 'end',
                        	dataIndex: 'TOTAL_DN_PRC_NON_INTEREST',
                        	hidden: true,
                        	text: '총 매출단가',
                        	format: '0,000.000'
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            align: 'end',
                            dataIndex: 'TOTAL_DN_AMT',
                            text: '총 매출금액(이자포함)',
                            width: 160,
                            format: '0,000.',
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
                            },
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	align: 'end',
                        	dataIndex: 'TOTAL_DN_PRC',
                        	text: '총 매출단가(이자포함)',
                        	width: 160,
                        	format: '0,000.000'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                        	width: 150,
                        	dataIndex: 'ADD_REASON',
                        	text: '사유',
                        	editor: {
                        		xtype: 'textfield',
                        	}
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 150,
                            dataIndex: 'DN_NO',
                            text: '출고번호'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'DN_SEQ',
                            text: '순번'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 150,
                        	dataIndex: 'MVMT_NO',
                        	text: '입고번호'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 114,
                        	dataIndex: 'MVMT_SEQ',
                        	text: '순번'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 114,
                        	dataIndex: 'SL_CHARGE_YN',
                        	text: '창고비여부',
                        	hidden: true
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 114,
                        	dataIndex: 'SL_FREE_DAY',
                        	text: '창고비 면제일수',
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 114,
                        	dataIndex: 'REQ_CFM_YN',
                        	text: '출하증확정유무',
                        	hidden: true
                        },
                    ],
                    listeners: {
                        viewready: function gridToolTip(grid) {
                        	var view = grid.view;
                            
                        	// record the current cellIndex
                        	grid.mon(view, {
                        		uievent: function (type, view, cell, recordIndex, cellIndex, e) {
                        			grid.cellIndex = cellIndex;
                        			grid.recordIndex = recordIndex;
                        		}
                        	});
                        	
                                
                        	grid.tip = Ext.create('Ext.tip.ToolTip', {
                        		target: view.el,
                        		delegate: '.x-grid-cell',
                        		trackMouse: true,
                        		renderTo: Ext.getBody(),
                        		listeners: {
                        			beforeshow: function updateTipBody(tip) {
                        				if (!Ext.isEmpty(grid.cellIndex) && grid.cellIndex !== -1) {
                        					header = grid.headerCt.getGridColumns()[grid.cellIndex];
                        					tip.update('추가매출단가 입력시 반드시 저장을 해주세요.');
                        				}
                        			}
                        		}
                        	});
                        }
	                },
                    viewConfig: {
                    	enableTextSelection: true,
                    },
                    selModel: {
                        selType: 'checkboxmodel',
                        listeners: {
                        	select: function(rowmodel, record, index, eOpts) {
                    			record.set('V_TYPE', 'V');
                            },
                            deselect: function(rowmodel, record, index, eOpts) {
                    			record.set('V_TYPE', '');
                            }
                        }
                    },
                    plugins: [
                        {
                            ptype: 'gridexporter'
                        },
                        {
                            ptype: 'cellediting',
                            clicksToEdit: 1,
                            listeners: {
                            	edit: function(editor, context, eOpts) {
                            		var DN_AMT = Number(context.record.data.DN_AMT);
                            		var QTY = Number(context.record.data.DN_QTY);
                            		
                            		if(context.column.dataIndex == 'ADD_DN_PRC') {
                            			context.record.set('ADD_DN_AMT', context.record.get('ADD_DN_PRC') * QTY);
                            			context.record.set('TOTAL_DN_AMT', context.record.get('DN_AMT') + context.record.get('ADD_DN_AMT'));
                            			context.record.set('TOTAL_DN_PRC', context.record.get('DN_PRC') + context.record.get('ADD_DN_PRC'));
                            		}
                            		if(context.column.dataIndex == 'ADD_DN_AMT') {
                            			context.record.set('ADD_DN_PRC', context.record.get('ADD_DN_AMT') / QTY);
                            			context.record.set('TOTAL_DN_AMT', context.record.get('DN_AMT') + context.record.get('ADD_DN_AMT'));
                            			context.record.set('TOTAL_DN_PRC', context.record.get('DN_PRC') + context.record.get('ADD_DN_PRC'));
                            		}
                            	}
                            }
                        }
                    ],
                    features : [ {
                		ftype : 'summary',
                		dock: 'bottom'
                	} ],
                }
            ]
        }
    ]

});