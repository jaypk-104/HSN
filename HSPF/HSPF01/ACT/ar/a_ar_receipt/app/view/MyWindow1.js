/*
 * File: app/view/MyWindow1.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('A_AR_RECEIPT.view.MyWindow1', {
	extend : 'Ext.window.Window',
	alias : 'widget.mywindow1',

	requires: [
        'A_AR_RECEIPT.view.MyWindowViewModel1',
        'Ext.form.field.Text',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.view.Table',
        'Ext.button.Button',
        'Ext.selection.CheckboxModel',
        'Ext.grid.plugin.Exporter',
    ],
	viewModel : {
		type : 'mywindow1'
	},
	height : 548,
	width : 889,
	title : '수금등록',
	modal : true,

	layout : {
		type : 'vbox',
		align : 'stretch'
	},
	dockedItems : [ {
		xtype : 'container',
		dock : 'top',
		height : 50,
		maxHeight : 50,
		minHeight : 50,
		width : 100,
		layout : {
			type : 'hbox',
			align : 'middle'
		},
		items : [ {
			xtype : 'datefield',
			flex : 1,
			id : 'W_AR_DT_FR2',
			maxWidth : 220,
			minWidth : 220,
			width : 220,
			labelAlign : 'right',
			fieldLabel : '채권발생일',
			labelWidth : 80,
			listeners : {
                render : function(datefield) {
                	var nows = new Date();
                	nows.setMonth(nows.getMonth()-1);
                    datefield.setValue(nows);
                },
                change : function () {
                	if(parent.Ext.getCmp('GUSER_ID').getValue() == 'TPAHTPAH5'){
                		//김은민 대리 요청
                		Ext.getCmp('W_AR_DT_TO2').setValue(Ext.getCmp('W_AR_DT_FR2').getValue());
                	}
                }	
            },
		}, {
			xtype : 'datefield',
			flex : 1,
			id : 'W_AR_DT_TO2',
			maxWidth : 140,
			minWidth : 140,
			width : 140,
			labelAlign : 'right',
			fieldLabel : '~',
			labelWidth : 10,
			listeners : {
                render : function(datefield) {
                	var nows = new Date();
                    datefield.setValue(nows);
                }	
            },
		}, {
			xtype : 'textfield',
			flex : 1,
			id : 'W_DEPT_CD2',
			maxWidth : 220,
			minWidth : 220,
			width : 220,
			fieldLabel : '부서',
			labelAlign : 'right',
			labelWidth : 80,
		} ]
	}, 
	{
		xtype : 'container',
		dock : 'top',
		height : 50,
		maxHeight : 50,
		minHeight : 50,
		width : 100,
		layout : {
			type : 'hbox',
			align : 'middle'
		},
		items : [ {
			xtype : 'datefield',
			flex : 1,
			id : 'W_CLS_DT_FR',
			maxWidth : 220,
			minWidth : 220,
			width : 220,
			labelAlign : 'right',
			fieldLabel : '수금일',
			labelWidth : 80,
			listeners : {
                render : function(datefield) {
                	var nows = new Date();
                	nows.setMonth(nows.getMonth()-1);
                    datefield.setValue(nows);
                },
                change : function () {
                	if(parent.Ext.getCmp('GUSER_ID').getValue() == 'TPAHTPAH5'){
                		//김은민 대리 요청
                		Ext.getCmp('W_CLS_DT_TO').setValue(Ext.getCmp('W_CLS_DT_FR').getValue());
                	}
                }
            },
		}, {
			xtype : 'datefield',
			flex : 1,
			id : 'W_CLS_DT_TO',
			maxWidth : 140,
			minWidth : 140,
			width : 140,
			labelAlign : 'right',
			fieldLabel : '~',
			labelWidth : 10,
			listeners : {
                render : function(datefield) {
                	var nows = new Date();
                    datefield.setValue(nows);
                }	
            },
		}, {
			xtype : 'textfield',
			flex : 1,
			id : 'W_BP_CD2',
			maxWidth : 220,
			minWidth : 220,
			width : 220,
			fieldLabel : '거래처',
			labelAlign : 'right',
			labelWidth : 80,
		} ]
	} ],
	items : [ {
		xtype : 'gridpanel',
		id : 'popGrid1',
		store : 'PopStore1',
		flex : 1,
		header : false,
		style : 'border: 1px solid #659DDC; padding: 5px;',
		tbar: [
        	{
                  xtype: 'container',
                  flex: 1
            },
            {
                  xtype: 'button',
                  glyph: 'xf1c3@FontAwesome',
                  id: 'popXlsxDown1',
                  cfg: {
                      type: 'excel07',
                      ext: 'xlsx'
                  },
                  iconCls: 'grid-excel-btn',
            }
        ],
		columns : [ {
			xtype : 'rownumberer'
		}, {
			xtype : 'gridcolumn',
			style : 'text-align: center; font-weight: bold;',
			dataIndex : 'V_TYPE',
			text : 'V_TYPE',
			width : 80,
			hidden : true
		}, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 100,
			dataIndex : 'CLS_TYPE',
			text : '수금구분',
			renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
                if(Ext.data.StoreManager.lookup('storeAC02').findRecord('DTL_CD',value) !==null)
                {
                    return Ext.data.StoreManager.lookup('storeAC02').findRecord('DTL_CD',value).get('DTL_NM');
                }
                return value;
            },
            editor: {
        		xtype: 'combobox',
        		displayField: 'DTL_NM',
        		autoLoadOnValue: true,
        		valueField: 'DTL_CD',
        		editable: false,
        		store: Ext.create('Ext.data.Store',{
        			autoLoad: true,
        			storeId: 'storeAC02',
        			proxy: {
        		        type: 'ajax',
        		        extraParams: {
        		           	V_MAST_CD: 'AC02',
        		           	V_GRID: 'Y'
        		        },	
        		        api: {
        		            read: '/HSPF01/common/sql/Combobox.jsp'
        		        },
        		        reader: {
        		            type: 'json',
        		            rootProperty: 'resultList'
        		        }
        		    }
        		}),
        		listConfig: {
                    itemTpl: [
                        '<div>{DTL_NM}</div>'
                    ]
                },
        	}
		}, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 150,
			dataIndex : 'CLS_AR_NO',
			text : '수금번호',
		}, {
	    	xtype: 'datecolumn',
	    	style: 'font-size: 12px; text-align: center; font-weight: bold;',
	    	text: '발생일',
	    	dataIndex: 'AR_DT',
	    	format: 'Y-m-d',
	    	width: 100,
	    }, {
	    	xtype: 'datecolumn',
	    	style: 'font-size: 12px; text-align: center; font-weight: bold;',
	    	text: '만료일',
	    	dataIndex: 'ISSUE_DT',
	    	format: 'Y-m-d',
	    	width: 100,
	    }, {
	    	xtype: 'datecolumn',
	    	style: 'font-size: 12px; text-align: center; font-weight: bold;',
	    	text: '수금일',
	    	dataIndex: 'CLS_DT',
	    	format: 'Y-m-d',
	    	width: 100,
	    }, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 100,
			dataIndex : 'BP_CD',
			text : '거래처',
		}, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 120,
			dataIndex : 'BP_NM',
			text : '거래처명',
		}, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 100,
			dataIndex : 'DEPT_CD',
			text : '부서코드',
		}, {
			xtype : 'gridcolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 150,
			dataIndex : 'DEPT_NM',
			text : '부서명',
		}, {
			xtype : 'numbercolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 120,
			align : 'end',
			dataIndex : 'IN_AMT',
			text : '수금대상금액',
			format : '0,000',
			summaryType: 'sum',
            summaryRenderer: function (value, summaryData, dataIndex) {
	            return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
	        },
		}, {
			xtype : 'numbercolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 120,
			align : 'end',
			dataIndex : 'LOC_AMT',
			text : '채권금액',
			format : '0,000',
			summaryType: 'sum',
            summaryRenderer: function (value, summaryData, dataIndex) {
	            return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
	        },
		}, {
			xtype : 'numbercolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 120,
			align : 'end',
			dataIndex : 'CLS_LOC_AMT',
			text : '수금금액',
			format : '0,000',
			summaryType: 'sum',
            summaryRenderer: function (value, summaryData, dataIndex) {
	            return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
	        },
		 }, {
			xtype : 'numbercolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 120,
			align : 'end',
			dataIndex : 'REMAIN_AMT',
			text : '잔액',
			format : '0,000',
			summaryType: 'sum',
            summaryRenderer: function (value, summaryData, dataIndex) {
	            return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
	        },
		}, {
			xtype : 'numbercolumn',
			style : 'font-size: 12px; text-align: center; font-weight: bold;',
			width : 120,
			align : 'end',
			dataIndex : 'REFUND_AMT',
			text : '환출금액',
			format : '0,000',
			summaryType: 'sum',
            summaryRenderer: function (value, summaryData, dataIndex) {
	            return "<font color='green'>"+Ext.util.Format.number(value, '0,000')+"<font>"; 
	        },
		}, ],
		plugins : [ {
			ptype : 'gridexporter'
		}, {
			ptype : 'cellediting'
		} ],
		selModel : {
			selType : 'checkboxmodel',
			mode : 'SINGLE',
			listeners : {
				
			}
		},
		features : [ {
			ftype : 'summary',
			dock : 'bottom'
		} ],
		viewConfig : {
			enableTextSelection : true,
		},
	}, {
		xtype : 'container',
		height : 50,
		maxHeight : 50,
		minHeight : 50,
		layout : {
			type : 'hbox',
			align : 'middle',
			pack : 'center'
		},
		items : [ {
			xtype : 'button',
			flex : 1,
			id : 'w_selBtn1',
			maxWidth : 100,
			minWidth : 100,
			width : 100,
			text : '조회',
			margin : '0 0 0 3'
		}, {
			xtype : 'button',
			flex : 1,
			id : 'w_regBtn1',
			maxWidth : 100,
			minWidth : 100,
			width : 100,
			text : '선택'
		} ]
	} ]

});