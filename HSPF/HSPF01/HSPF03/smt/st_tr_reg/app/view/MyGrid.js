/*
 * File: app/view/MyGrid.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('st_tr_reg.view.MyGrid', {
    extend: 'Ext.grid.Panel',
    alias: 'widget.myGrid',

    requires: [
        'st_tr_reg.view.MyGridViewModel',
        'st_tr_reg.view.MyGridViewController',
        'Ext.view.Table',
        'Ext.grid.column.RowNumberer',
        'Ext.grid.column.Boolean',
        'Ext.form.field.ComboBox',
        'Ext.grid.column.Date',
        'Ext.form.field.Date',
        'Ext.grid.column.Number',
        'Ext.form.field.Number',
        'Ext.selection.CheckboxModel',
        'Ext.grid.plugin.Exporter',
        'Ext.grid.plugin.CellEditing'
    ],

    config: {
        tbar: [
            {
                id: 'gridAddBtn',
                text: '',
                margin: '0 3 0 0',
                glyph: 'xf055@FontAwesome',
                iconCls: 'grid-add-btn'
            },
            {
                id: 'gridDelBtn',
                text: '',
                margin: '0 3 0 0',
                glyph: 'xf056@FontAwesome',
                iconCls: 'grid-del-btn'
            },
            {
                xtype: 'container',
                flex: 1
            },
            {
                xtype: 'button',
                glyph: 'xf1c3@FontAwesome',
                id: 'xlsxDown',
                cfg: {
                    type: 'excel07',
                    ext: 'xlsx'
                },
                iconCls: 'grid-excel-btn',
                
            }
        ]
    },

    controller: 'mygrid',
    viewModel: {
        type: 'mygrid'
    },
    id: 'myGrid',
    style: 'border: 1px solid #659DDC; padding: 5px;',
    bodyBorder: false,
    header: false,
    store: 'MyStore',

    viewConfig: {
        height: 902
    },
    columns: [
        {
            xtype: 'rownumberer',
            locked: true,
            width: 40
        },
        {
            xtype: 'gridcolumn',
            hidden: true,
            dataIndex: 'V_TYPE',
            text: 'V_TYPE'
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 135,
            sortable: true,
            dataIndex: 'IV_DN_NO',
            enableTextSelection: true,
            text: '등록관리번호',
        },
        {
            xtype: 'datecolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            align: 'center',
            dataIndex: 'GR_DT',
            enableTextSelection: true,
            exportStyle: {
                format: 'Short Date'
            },
            text: '입고일자',
            editor: {
            	xtype: 'datefield',
            	format: 'Y-m-d',
            	altFormats: 'm/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j|Ymd',
            	style: 'text-align:center'
            },
            format: 'Y-m-d',
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return Ext.Date.format(new Date(value), 'Y-m-d');
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 100,
            sortable: true,
            dataIndex: 'MVMT_NO',
            enableTextSelection: true,
            text: '입고번호',
            hidden: true
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 100,
            sortable: true,
            dataIndex: 'DN_NO',
            enableTextSelection: true,
            text: '출고번호',
            hidden: true
        },
        {
            xtype: 'numbercolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 100,
            align: 'end',
            dataIndex: 'DN_SEQ',
            enableTextSelection: true,
            exportStyle: {
                alignment: {
                    horizontal: 'Right'
                }
            },
            text: '순번',
            format: '0,000',
            hidden: true
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'ITEM_CD',
            enableTextSelection: true,
            text: '품번',
            editor: {
                xtype: 'textfield',
                style: 'text-align:left',
                allowBlank: false,
                listeners: {
                    afterrender: function(c) {
                    	c.getEl().on('dblclick', function() {
                			var popup = Ext.create("Popup.view.WinItemPop");
                			popup.show();
                			
                			Ext.getCmp('W_TYPE').setValue('ITEM_STEEL');
                			var store = Ext.getStore('WinItemPopStore');
                			store.removeAll();
                        });
                    }
                }
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return value;
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 100,
            sortable: true,
            dataIndex: 'ITEM_NM',
            enableTextSelection: true,
            text: '품명',
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'M_BP_CD',
            enableTextSelection: true,
            text: '매입처코드',
            emptyText: '(Double Click)', 
            editor: {
                xtype: 'textfield',
                style: 'text-align:left',
                allowBlank: false,
                blankText: '필수 입력사항입니다.',
                
                listeners: {
                    afterrender: function(c) {
                    	c.getEl().on('dblclick', function() {
                			var popup = Ext.create("Popup.view.WinMBpPop");
                			popup.show();
                			
                			Ext.getCmp('fieldType').setValue('grid');
                			var store = Ext.getStore('WinMBpPopStore');
                			store.removeAll();
                        });
                    }
                }
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return value;
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 190,
            sortable: true,
            dataIndex: 'M_BP_NM',
            enableTextSelection: true,
            text: '매입처명',
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'PUR_GRP',
            enableTextSelection: true,
            text: '구매그룹',
            editor: {
            	xtype: 'combobox',
        		editable: false,
        		displayField: 'DTL_NM',
        		autoLoadOnValue: true,
        		valueField: 'DTL_CD',
        		store: 'PurGrpStore',
        		listeners: {
                    change: function(field, newValue, oldValue, eOpts) {
                    	var store = field.store;
                        var record = field.up('editor').context.record;
                        var BPrecord = store.findRecord('DTL_CD',newValue);
                        if(BPrecord){
                            record.set('PUR_GRP_NM', BPrecord.data['DTL_NM']);
                        }
                    }
                }
        		
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return value;
            }
//            renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
//                if(Ext.data.StoreManager.lookup('PurGrpStore').findRecord('DTL_CD',value) !==null)
//                {
//                    return Ext.data.StoreManager.lookup('PurGrpStore').findRecord('DTL_CD',value).get('DTL_NM');
//                }
//                return value;
//            },
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 100,
            sortable: true,
            dataIndex: 'PUR_GRP_NM',
            enableTextSelection: true,
            text: '구매그룹명',
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'CAR_NO',
            enableTextSelection: true,
            text: '차량번호',
            editor: {
                xtype: 'textfield',
                style: 'text-align:left',
                allowBlank: false,
                blankText: '필수 입력사항입니다.'
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return value;
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'LOC_NM',
            enableTextSelection: true,
            text: '지역명',
            editor: {
                xtype: 'textfield',
                style: 'text-align:left',
                allowBlank: false,
                blankText: '필수 입력사항입니다.'
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return value;
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'GRADE_CD',
            enableTextSelection: true,
            text: '등급코드',
            editor: {
            	xtype: 'combobox',
        		editable: false,
        		displayField: 'DTL_NM',
        		autoLoadOnValue: true,
        		valueField: 'DTL_CD',
        		store: 'GradeStore',
        		listeners: {
                    change: function(field, newValue, oldValue, eOpts) {
                    	var store = field.store;
                        var record = field.up('editor').context.record;
                        var BPrecord = store.findRecord('DTL_CD',newValue);
                        if(BPrecord){
                            record.set('GRADE_NM', BPrecord.data['DTL_NM']);
                        }
                    }
                }
        		
            },
            renderer: function(value, metaData, record, rowIndex, colIndex, store, view) {
            	if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
            		metaData.style = "background-color:#C7FDDE;";
                }
//                if(Ext.data.StoreManager.lookup('GradeStore').findRecord('DTL_CD',value) !==null)
//                {
//                    return Ext.data.StoreManager.lookup('GradeStore').findRecord('DTL_CD',value).get('DTL_CD');
//                }
                return value;
            },
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 100,
            sortable: true,
            dataIndex: 'GRADE_NM',
            enableTextSelection: true,
            text: '등급명',
        },
        {
            xtype: 'numbercolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            align: 'end',
            dataIndex: 'TOTAL_KG',
            enableTextSelection: true,
            exportStyle: {
                alignment: {
                    horizontal: 'Right'
                },
            },
            text: '총중량',
            format: '0,000',
            editor: {
                xtype: 'numberfield',
                style: 'text-align:right',
                allowBlank: false,
                allowExponential: false,
                minValue: 0
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return Ext.util.Format.number(value, '0,000');
            },
        },
        {
            xtype: 'numbercolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            align: 'end',
            dataIndex: 'GONG_KG',
            enableTextSelection: true,
            exportStyle: {
                alignment: {
                    horizontal: 'Right'
                }
            },
            text: '공차중량',
            format: '0,000',
            editor: {
                xtype: 'numberfield',
                style: 'text-align:right',
                allowBlank: false,
                allowExponential: false,
                minValue: 0
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return Ext.util.Format.number(value, '0,000');
            }
        },
        {
            xtype: 'numbercolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            align: 'end',
            dataIndex: 'MINUS_KG',
            enableTextSelection: true,
            exportStyle: {
                alignment: {
                    horizontal: 'Right'
                }
            },
            text: '감량',
            format: '0,000',
            editor: {
                xtype: 'numberfield',
                style: 'text-align:right',
                allowBlank: false,
                allowExponential: false,
                minValue: 0
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return Ext.util.Format.number(value, '0,000');
            }
        },
        {
            xtype: 'numbercolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            align: 'end',
            dataIndex: 'GR_KG',
            enableTextSelection: true,
            exportStyle: {
                alignment: {
                    horizontal: 'Right'
                }
            },
            text: '입고중량',
            format: '0,000',
            editor: {
                xtype: 'numberfield',
                style: 'text-align:right',
                allowBlank: false,
                allowExponential: false,
                minValue: 0
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return Ext.util.Format.number(value, '0,000');
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            text: '매입',
            columns: [
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'DELV_AMT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '운반비',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 10px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'DELV_PRC',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '매입단가<BR>(운반비포함)',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 10px; text-align: center; font-weight: bold; ',
                    width: 100,
                    align: 'end',
                    dataIndex: 'PRC',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '매입단가<BR>(운반비미포함)',
                    format: '0,000',
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'GR_AMT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '공급가액',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'GR_VAT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '부가세',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'TOTAL_AMT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '합계',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                }
            ]
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            sortable: true,
            dataIndex: 'S_BP_CD',
            enableTextSelection: true,
            text: '매출처코드',
            emptyText: '(Double Click)',
            editor: {
                xtype: 'textfield',
                style: 'text-align:left',
                allowBlank: false,
                blankText: '필수 입력사항입니다.',
                
                listeners: {
                    afterrender: function(c) {
                    	c.getEl().on('dblclick', function() {
                			var popup = Ext.create("Popup.view.WinSBpPop");
                			popup.show();
                			
                			Ext.getCmp('fieldType').setValue('grid');
                			var store = Ext.getStore('WinSBpPopStore');
                			store.removeAll();
                        });
                    }
                }
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return value;
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            width: 190,
            sortable: true,
            dataIndex: 'S_BP_NM',
            enableTextSelection: true,
            text: '매출처명',
        },
        {
            xtype: 'datecolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
            width: 100,
            align: 'center',
            dataIndex: 'DN_DT',
            enableTextSelection: true,
            exportStyle: {
                format: 'Short Date'
            },
            text: '출고일자',
            format: 'Y-m-d',
            editor: {
                xtype: 'datefield',
                format: 'Y-m-d',
                altFormats: 'm/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j|Ymd',
                style: 'text-align:center'
            },
            renderer: function(value, meta, record) {
                if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                	meta.style = "background-color:#C7FDDE;";
                }
                return Ext.Date.format(new Date(value), 'Y-m-d');
            }
        },
        {
            xtype: 'gridcolumn',
            style: 'font-size: 12px; text-align: center; font-weight: bold;',
            text: '매출',
            columns: [
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'DN_PRC',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '단가',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'DN_AMT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '공급가액',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'DN_VAT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '부가세',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                },
                {
                    xtype: 'numbercolumn',
                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6;',
                    width: 100,
                    align: 'end',
                    dataIndex: 'DN_TOTAL_AMT',
                    enableTextSelection: true,
                    exportStyle: {
                        alignment: {
                            horizontal: 'Right'
                        }
                    },
                    text: '합계',
                    format: '0,000',
                    editor: {
                        xtype: 'numberfield',
                        style: 'text-align:right',
                        allowBlank: false,
                        allowExponential: false,
                        minValue: 0
                    },
                    renderer: function(value, meta, record) {
                        if (record.get('MVMT_NO') == '' || record.get('MVMT_NO') == null || record.get('MVMT_NO') == undefined) {
                        	meta.style = "background-color:#C7FDDE;";
                        }
                        return Ext.util.Format.number(value, '0,000');
                    }
                }
            ]
        }
    ],
    selModel: {
        selType: 'checkboxmodel',
//        checkOnly: true,
        listeners: {
            select: 'onCheckboxModelSelect',
            deselect: 'onCheckboxModelDeselect'
        }
    },
    viewConfig: {
    	enableTextSelection: true,
    },
    plugins: [
        {
            ptype: 'gridexporter'
        },
        {
            ptype: 'cellediting',
            clicksToEdit: 1,
            listeners: {
            	edit:  function(editor, context, eOpts) {
            		var TOTAL_KG = Number(context.record.get('TOTAL_KG')); //총중량
            		var GONG_KG = Number(context.record.get('GONG_KG')); //공차중량
            		var MINUS_KG = Number(context.record.get('MINUS_KG')); //감량
            		var GR_KG = Number(context.record.get('GR_KG')); //입고중량
            		
            		var DELV_AMT = Number(context.record.get('DELV_AMT')); //운반비
            		var DELV_PRC = Number(context.record.get('DELV_PRC')); //매입단가(운반비포함)
            		var PRC = Number(context.record.get('PRC')); //매입단가(운반비미포함)
            		var GR_AMT = Number(context.record.get('GR_AMT')); //공급가액
            		var GR_VAT = Number(context.record.get('GR_VAT')); //부가세
            		var TOTAL_AMT = Number(context.record.get('TOTAL_AMT')); //합계
            		
            		var DN_PRC = Number(context.record.get('DN_PRC')); //단가
            		var DN_AMT = Number(context.record.get('DN_AMT')); //공급가액
            		var DN_VAT = Number(context.record.get('DN_VAT')); //부가세
            		var DN_TOTAL_AMT = Number(context.record.get('DN_TOTAL_AMT')); //합계
            		
            		if(context.column.dataIndex == 'TOTAL_KG'
            			|| context.column.dataIndex == 'GONG_KG'
            			|| context.column.dataIndex == 'MINUS_KG'
            		) {
            			context.record.set('GR_KG', TOTAL_KG - GONG_KG - MINUS_KG);
            		}
            		
            		if(context.column.dataIndex == 'DELV_AMT'
            			|| context.column.dataIndex == 'DELV_PRC'
            		) {
            			context.record.set('GR_AMT', DELV_PRC * GR_KG - DELV_AMT);
            			context.record.set('GR_VAT', (DELV_PRC * GR_KG - DELV_AMT)/10);
            			context.record.set('TOTAL_AMT', (DELV_PRC * GR_KG - DELV_AMT) * 1.1);
            			context.record.set('PRC', (DELV_PRC * GR_KG - DELV_AMT) / GR_KG);
            		}

            		if(context.column.dataIndex == 'DN_PRC') {
            			context.record.set('DN_AMT', DN_PRC * GR_KG);
            			context.record.set('DN_VAT', DN_PRC * GR_KG / 10);
            			context.record.set('DN_TOTAL_AMT', DN_PRC * GR_KG * 1.1);
            		}
            		
            		if(context.column.dataIndex == 'DN_AMT') {
            			context.record.set('DN_VAT', DN_AMT / 10);
            			context.record.set('DN_TOTAL_AMT', DN_AMT * 1.1);
            		}
            		
            		
            	},
            	beforeedit: function(editor, context, eOpts) {
            		var MVMT_NO = context.record.get('MVMT_NO'); //입고번호
            		var S_COLUMN = '/DN_DT/DN_PRC/DN_AMT/DN_VAT/DN_TOTAL_AMT/';
            		
            		
            		if(S_COLUMN.indexOf(context.field) > 0){
            			//입고번호 있어도 출고쪽 데이터는 수정 가능하게.
            			context.cancel = false;
            		}
            		//입고번호있으면 수정 불가능하게.
            		else if (MVMT_NO == '' || MVMT_NO == null ){
            			context.cancel = false;
            		}
            		else{
            			context.cancel = true;
            		}
            		
                 }
            }
        }
    ]

});