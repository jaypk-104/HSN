/*
 * File: app/controller/WinAddRowController.js
 *
 * This file was generated by Sencha Architect version 4.2.2.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('M_GR_BAD_ITEM_TOT_HSPF.controller.WinAddRowController', {
    extend: 'Ext.app.Controller',

    control: {
        "#popSelectBtn": {
            click: 'popSelectBtnClick'
        },
        "[cls=pop_search]": {
            specialkey: 'popEnter'
        },
        "#popGrid": {
            celldblclick: 'onGridpanelCellDblClick'
        }
    },

    popSelectBtnClick: function(button, e, eOpts) {
        var store = Ext.getStore('PopStore');
        store.load({
        	params:{
        		V_TYPE : 'POP_S',
        		V_GR_DT_FR : Ext.getCmp('W_GR_DT_FR').getValue(),
        		V_GR_DT_TO : Ext.getCmp('W_GR_DT_TO').getValue(),
        		V_ITEM_NM : Ext.getCmp('W_ITEM_NM').getValue(),
        		V_ITEM_CD : Ext.getCmp('W_ITEM_CD').getValue(),
        	}
        })
    },
    
    popEnter: function(field, e, eOpts) {
    	if (e.getKey() == e.ENTER) {
    		this.popSelectBtnClick();
    	}
    },
    
    onGridpanelCellDblClick: function(tableview, td, cellIndex, record, tr, rowIndex, e, eOpts) {
        	
        var store = Ext.getStore('MyStore');
        
        var nows = new Date();
        var rec = Ext.create('M_GR_BAD_ITEM_TOT_HSPF.model.MyModel', {
        	BP_NM : record.data['BP_NM'],
        	ITEM_CD : record.data['ITEM_CD'],
        	ITEM_NM : record.data['ITEM_NM'],
        	GR_QTY : record.data['GR_QTY'],
        	MVMT_DT : record.data['MVMT_DT'],
        	MVMT_NO : record.data['MVMT_NO'],
        	GR_NO : record.data['GR_NO'],
        	GR_SEQ : record.data['GR_SEQ'],
        	PO_NO : record.data['PO_NO'],
        	PO_SEQ : record.data['PO_SEQ'],
		});
        
        store.insert(0, rec);
        
        Ext.getCmp('popWindow').destroy();
    }

});
