/*
 * File: app/view/MyPanel2.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('M_SL_TRANS_STEEL.view.MyPanel2', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.mypanel2',

    requires: [
        'M_SL_TRANS_STEEL.view.MyPanel2ViewModel',
        'M_SL_TRANS_STEEL.view.MyPanel2ViewController',
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.form.FieldContainer',
        'Ext.form.field.Date',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.grid.column.Number',
        'Ext.view.Table',
        'Ext.selection.CheckboxModel',
        'Ext.grid.plugin.Exporter',
        'Ext.grid.plugin.CellEditing'
    ],

    controller: 'mypanel2',
    viewModel: {
        type: 'mypanel2'
    },
    layout: 'fit',
    title: '항운노조비등록',

    items: [
        {
            xtype: 'container',
            flex: 1,
            layout: {
                type: 'vbox',
                align: 'stretch'
            },
            items: [
                {
                    xtype: 'form',
                    layout: 'auto',
                    bodyPadding: '0 10 0 10',
                    header: false,
                    title: 'My Form',
                    items: [
                        {
                            xtype: 'fieldset',
                            height: 100,
                            maxHeight: 100,
                            minHeight: 100,
                            collapsible: true,
                            title: '[ Search ]',
                            layout: {
                                type: 'vbox',
                                align: 'stretch',
                                pack: 'center'
                            },
                            items: [
                                {
                                    xtype: 'fieldcontainer',
                                    flex: 1,
                                    height: 35,
                                    maxHeight: 35,
                                    minHeight: 35,
                                    width: 400,
                                    layout: {
                                        type: 'hbox',
                                        align: 'stretch'
                                    },
                                    items: [
                                        {
                                            xtype: 'datefield',
                                            maxWidth: 250,
                                            minWidth: 250,
                                            width: 250,
                                            fieldLabel: '기준기간',
                                            format: 'Y-m-d',
                                            altFormats: 'm/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j|Ymd',
                                            listeners: {
                                                render: {
                                                    fn: 'onDatefieldRender2',
                                                    single: false
                                                }
                                            }
                                        },
                                        {
                                            xtype: 'datefield',
                                            flex: 1,
                                            maxWidth: 170,
                                            minWidth: 170,
                                            width: 170,
                                            fieldLabel: '~',
                                            labelWidth: 20,
                                            format: 'Y-m-d',
                                            altFormats: 'm/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j|Ymd',
                                            listeners: {
                                                render: 'onDatefieldRender11'
                                            }
                                        },
                                        {
                                            xtype: 'textfield',
                                            maxWidth: 250,
                                            minWidth: 250,
                                            width: 250,
                                            fieldLabel: 'L/C번호',
                                            margin: '0 0 0 30',
                                            name: 'search_field'
                                        },
                                        {
                                            xtype: 'textfield',
                                            margin: '0 0 0 30',
                                            maxWidth: 230,
                                            minWidth: 230,
                                            width: 230,
                                            fieldLabel: 'B/L번호',
                                            labelWidth: 80,
                                            name: 'search_field'
                                        }
                                    ]
                                },
//                                {
//                                    xtype: 'fieldcontainer',
//                                    layout: {
//                                        type: 'hbox',
//                                        align: 'stretch'
//                                    },
//                                    items: [
//                                        
//                                    ]
//                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'container',
                    flex: 1,
                    layout: {
                        type: 'vbox',
                        align: 'stretch'
                    },
                    items: [
                        {
                            xtype: 'gridpanel',
                            flex: 1,
                            style: 'border: 1px solid lightgray; padding: 5px;',
                            header: false,
                            title: 'My Grid Panel',
                            store: 'MyStore3_1',
                            id: 'myGrid3_1',
                            columns: [
                                {
                                    xtype: 'rownumberer',
                                    width: 40
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 114,
                                    dataIndex: 'V_TYPE',
                                    text: 'V_TYPE',
                                    hidden: true
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 150,
                                    dataIndex: 'LC_DOC_NO',
                                    text: 'L/C번호'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 150,
                                    dataIndex: 'BL_DOC_NO',
                                    text: 'B/L번호'
                                },
                                {
                                	xtype: 'gridcolumn',
                                	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                	width: 150,
                                	dataIndex: 'CC_NO',
                                	text: '통관번호'
                                },
                                {
                                	xtype: 'gridcolumn',
                                	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                	width: 114,
                                	dataIndex: 'SL_CD',
                                	text: 'SL_CD',
                                	hidden: true
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 114,
                                    dataIndex: 'SL_NM',
                                    text: '창고'
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'QTY',
                                    text: '입고수량'
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'number',
                                    text: '입고BOX수량'
                                },
                                {
                                	xtype: 'datecolumn',
                                	style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
                                	align: 'center',
                                	dataIndex: 'PH_DT',
                                	text: '<span style=\'color:red\'>*</span>기준일',
                                	format: 'Y-m-d',
                                    editor: {
                                    	xtype: 'datefield',
                                    	format: 'Y-m-d',
                                    	altFormats: 'm/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j|Ymd',
                                    }
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
                                    align: 'end',
                                    dataIndex: 'PH_AMT',
                                    text: '<span style=\'color:red\'>*</span>노임',
                                	format: '0,000.00',
                                    editor: {
                                    	xtype: 'numberfield',
                                    	format: '0,000.00'
                                    }
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold; color: #3367d6',
                                    width: 200,
                                    dataIndex: 'REMARK',
                                    text: '비고',
                                    editor: {
                                    	xtype: 'textfield'
                                    }
                                },
                                {
                                	xtype: 'gridcolumn',
                                	style: 'font-size: 12px; text-align: center; font-weight: bold; ',
                                	width: 150,
                                	dataIndex: 'PH_NO',
                                	text: 'PH_NO',
                                }
                            ],
                            viewConfig: {
                            	enableTextSelection: true,
                            },
                            selModel: {
                                selType: 'checkboxmodel',
                                checkOnly: true,
                                listeners: {
                                	select: function(rowmodel, record, index, eOpts) {
                                    	record.set('V_TYPE', 'V');
                                    	
                                    	var store3_2 = Ext.getStore('MyStore3_2');
                                    	var gridRecord = Ext.getCmp('myGrid3_1').getSelectionModel(); 
                                    		
                                    	if(record.get('PH_NO') != undefined) {
                                    		store3_2.load({
                                	    		params: {
                                	    			V_TAB_TYPE: 'T3',
                                	    			V_TYPE: 'SD',
                                	    			V_COMP_ID: parent.Ext.getCmp('GCOMP_ID').getValue(),
                                	    			V_USR_ID: parent.Ext.getCmp('GUSER_ID').getValue(),
                                	    			V_PH_NO: record.get('PH_NO')
                                	    		},
                                	    		callback: function(records,operations,success){
                                	    			
                                	    		}
                                	    	});
                                    	}
                                    	
                                    },
                                    deselect: function(rowmodel, record, index, eOpts) {
                                    	record.set('V_TYPE', '');
                                    	
                                    	var store3_2 = Ext.getStore('MyStore3_2');
                                    	var gridRecord = Ext.getCmp('myGrid3_1').getSelectionModel(); 
                                    	
                                    	store3_2.removeAll();
                                    		
                                    }
                                }
                            },
                            plugins: [
                                {
                                    ptype: 'gridexporter'
                                },
                                {
                                    ptype: 'cellediting',
                                    clicksToEdit: 2,
                                    listeners: {
                                    	edit: function(editor, context, eOpts) {
                                    		var selModel = Ext.getCmp('myGrid3_1').getSelectionModel();
                                    		selModel.select(context.record, true);
                                    	}
                                	}
                                }
                            ]
                        },
                        {
                        	xtype: 'splitter',
                        	collapseTarget: 'prev'
                        },
                        {
                            xtype: 'gridpanel',
                            flex: 1,
                            style: 'border: 1px solid lightgray; padding: 5px;',
                            header: false,
                            title: 'My Grid Panel',
                            store: 'MyStore3_2',
                            columns: [
                                {
                                    xtype: 'rownumberer',
                                    width: 40
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 114,
                                    dataIndex: 'V_TYPE',
                                    text: 'V_TYPE',
                                    hidden: true
                                },
                                {
                                	xtype: 'gridcolumn',
                                	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                	width: 114,
                                	dataIndex: 'ITEM_CD',
                                	text: '품목코드'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 114,
                                    dataIndex: 'ITEM_NM',
                                    text: '품목명'
                                },
                                {
                                    xtype: 'gridcolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    width: 114,
                                    dataIndex: 'SPEC',
                                    text: '규격'
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'GR_QTY',
                                    text: '입고수량',
                                    format: '0,000.00'
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'PH_DIS_AMT',
                                    text: '배부노임',
                                    format: '0,000.00'
                                },
                            ],
                            viewConfig: {
                            	enableTextSelection: true,
                            },
                            selModel: {
                                selType: 'checkboxmodel'
                            },
                            plugins: [
                                {
                                    ptype: 'gridexporter'
                                },
                                {
                                    ptype: 'cellediting'
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    ]

});