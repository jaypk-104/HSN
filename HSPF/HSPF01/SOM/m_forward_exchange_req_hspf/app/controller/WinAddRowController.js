/*
 * File: app/controller/MyGridController.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('M_FORWARD_EXCHANGE_REQ_HSPF.controller.WinAddRowController', {
    extend: 'Ext.app.Controller',	
    stores: ['MyStore', 'MyStore1', 'PopStore'],
    control: {
        "#W_SelectBtn": {
            click: 'W_SelectBtnClick'
        },
        "[cls=pop_search]": {
            specialkey: 'popEnter'
        },
        "#popGrid": {
            celldblclick: 'onGridpanelCellDblClick'
        }

    },


    W_SelectBtnClick: function(button, e, eOpts) {
    	var store = Ext.getStore('PopStore');
    	store.load({
    		params:{
    			V_TYPE : 'POP_SELECT',
    			V_BL_DOC_NO : Ext.getCmp('W_BL_DOC_NO').getValue(),
    			V_LC_DOC_NO : Ext.getCmp('W_LC_DOC_NO').getValue(),
    		}
    	})
    },
    popEnter: function(field, e, eOpts) {
    	if (e.getKey() == e.ENTER) {
    		this.W_SelectBtnClick();
    	}
    },
    
    onGridpanelCellDblClick: function(tableview, td, cellIndex, record, tr, rowIndex, e, eOpts) {
    	
        var store = Ext.getStore('MyStore');
        
        var nows = new Date();
        var rec = Ext.create('M_FORWARD_EXCHANGE_REQ_HSPF.model.MyModel', {
        	LC_DOC_NO : record.data['LC_DOC_NO'],
        	LC_NO : record.data['LC_NO'],
        	BL_DOC_NO : record.data['BL_DOC_NO'],
        	BL_NO : record.data['BL_NO'],
        	DEPT_NM : record.data['DEPT_NM'],
        	DEPT_CD : record.data['DEPT_CD'],
        	S_BP_NM : record.data['S_BP_NM'],
        	S_BP_CD : record.data['S_BP_CD'],
        	SALE_TYPE_NM : record.data['SALE_TYPE_NM'],
        	SALE_TYPE_CD : record.data['SALE_TYPE_CD'],
        	CUR : record.data['CUR'],
        	DOC_AMT : record.data['DOC_AMT'],
        	BANK_CD: null,
        	DUE_DT: null,
        	REMARK: '',
        	REQ_DT: null,
        	V_TYPE: null,
		});
        
        store.insert(0, rec);
        
        Ext.getCmp('popWindow').destroy();
    }
    
});
