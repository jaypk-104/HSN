/*
 * File: app/view/MyPanel1.js
 *
 * This file was generated by Sencha Architect version 4.2.4.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.5.x Classic library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.5.x Classic. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('Y_APPROV_STEEL.view.MyPanel1', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.mypanel11',

    requires: [
        'Y_APPROV_STEEL.view.MyPanel1ViewModel',
        'Ext.form.Panel',
        'Ext.form.FieldSet',
        'Ext.form.FieldContainer',
        'Ext.form.field.Text',
        'Ext.grid.Panel',
        'Ext.grid.column.RowNumberer',
        'Ext.grid.column.Number',
        'Ext.view.Table',
        'Ext.selection.CheckboxModel',
        'Ext.grid.plugin.Exporter',
        'Ext.grid.plugin.CellEditing'
    ],

    viewModel: {
        type: 'mypanel11'
    },
    layout: 'fit',
    title: 'Tab 2',

    items: [
        {
            xtype: 'container',
            flex: 1,
            layout: {
                type: 'vbox',
                align: 'stretch'
            },
            items: [
                {
                    xtype: 'form',
                    layout: 'auto',
                    bodyPadding: '0 10 0 10',
                    header: false,
                    title: 'My Form',
                    items: [
                        {
                            xtype: 'fieldset',
                            height: 100,
                            maxHeight: 100,
                            minHeight: 100,
                            title: '[ Search ]',
                            layout: {
                                type: 'vbox',
                                align: 'stretch',
                                pack: 'center'
                            },
                            items: [
                                {
                                    xtype: 'fieldcontainer',
                                    layout: {
                                        type: 'hbox',
                                        align: 'stretch'
                                    },
                                    items: [
                                        {
                                            xtype: 'textfield',
                                            maxWidth: 250,
                                            minWidth: 250,
                                            width: 250,
                                            fieldLabel: '품의관리번호',
                                            name: 'search_field',
                                            id: 'V_APPROV_MGM_NO2',
                                            emptyText: '(Double Click)',
                                            listeners: {
                                                afterrender: function(c) {
                                                	c.getEl().on('dblclick', function() {
                                                		var popup = Ext.create("Y_APPROV_STEEL.view.WinApprovPop");
                                                        
                                                        popup.setSize(Ext.getBody().getViewSize());
                                                        popup.show();
                                                        
//                                                        var store = Ext.getStore('PopStore1');
//                                                		store.removeAll();
                                                        Y_APPROV_STEEL.app.getController("ApprovPopController").w_approvSelBtnClick();
                                                    });
                                                }
                                            },
                                            fieldStyle: 'background-color: #ffefbb'
                                        },
                                        {
                                        	xtype: 'textfield',
                                        	maxWidth: 250,
                                        	minWidth: 250,
                                        	width: 250,
                                        	fieldLabel: '품의번호',
                                        	name: 'search_field',
                                        	id: 'V_APPROV_NO2',
                                        	margin: '0 0 0 30'
                                        },
                                        {
                                        	xtype: 'textfield',
                                        	maxWidth: 250,
                                        	minWidth: 250,
                                        	width: 250,
                                        	fieldLabel: '품의차수',
                                        	name: 'search_field',
                                        	id: 'V_APPROV_SEQ2',
                                        	margin: '0 0 0 30'
                                        },
                                        {
                                        	xtype: 'textfield',
                                        	maxWidth: 450,
                                        	minWidth: 450,
                                        	width: 450,
                                        	fieldLabel: '품의명',
                                        	name: 'search_field',
                                        	id: 'V_APPROV_NM2',
                                        	margin: '0 0 0 30'
                                        },
                                    ]
                                }
                            ]
                        }
                    ]
                },
                {
                    xtype: 'gridpanel',
                    flex: 1,
                    style: 'border: 1px solid lightgray; padding: 5px;',
                    header: false,
                    title: 'My Grid Panel',
                    store: 'MyStore2',
                    id: 'myGrid3',
                    tbar: [
                           {
                               id: 'gridAddBtn3',
                               text: '',
                               margin: '0 3 0 0',
                               glyph: 'xf055@FontAwesome',
                               iconCls: 'grid-add-btn',
                               disabled: true
                           },
                           {
                               id: 'gridDelBtn3',
                               text: '',
                               margin: '0 3 0 0',
                               glyph: 'xf056@FontAwesome',
                               iconCls: 'grid-del-btn',
                               disabled: true
                           },
                           {
                               xtype: 'container',
                               flex: 1
                           },
                           {
                               xtype: 'button',
                               glyph: 'xf1c3@FontAwesome',
//                               id: 'xlsxDown1',
                               cfg: {
                                   type: 'excel07',
                                   ext: 'xlsx'
                               },
                               iconCls: 'grid-excel-btn',
                               listeners : {
                            	   click: function(button, e, eOpts) {
	                           	        var currentDate = Ext.util.Format.date(new Date(), 'Y-m-d His');
	                                	var grid = Ext.getCmp('myGrid3');
	                                	grid.saveDocumentAs({
	                                        type: 'xlsx',
	                                        title: '품의정보조회', //엑셀내타이틀
	                                        fileName: currentDate+'.xlsx' //엑셀파일이름
	                            		});
		                            },
                        	
                               }
                           }
                       ],
                    columns: [
                        {
                            xtype: 'rownumberer',
                            width: 40
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'V_TYPE',
                            text: 'V_TYPE',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 80,
                            dataIndex: 'BF_TYPE_NM',
                            text: '품목'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 130,
                            dataIndex: 'BRAND',
                            text: 'BRAND',
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'ITEM_CD',
                            text: '품목코드',
                            hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'SM_NM',
                            text: '품명',
                            hidden: true
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            align: 'end',
                            dataIndex: 'PO_QTY',
                            text: '수량(톤)',
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                            }
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	dataIndex: 'CUR',
                        	align: 'center',
                        	width : 70,
                        	text: '화폐단위',
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	dataIndex: 'XCH_RATE',
                        	align: 'center',
                        	text: '환율',
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            text: '매입',
                            columns: [
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'MUL_AMT',
                                    text: '물품대',
                                    summaryType: 'sum',
                                    summaryRenderer: function(value, summaryData, dataIndex) {
                                        return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                                    }
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'BU_AMT',
                                    text: '부대비용',
                                    summaryType: 'sum',
                                    summaryRenderer: function(value, summaryData, dataIndex) {
                                        return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                                    }
                                },
                                {
                                    xtype: 'numbercolumn',
                                    style: 'font-size: 12px; text-align: center; font-weight: bold;',
                                    align: 'end',
                                    dataIndex: 'WON',
                                    text: '매입원가',
                                    summaryType: 'sum',
                                    summaryRenderer: function(value, summaryData, dataIndex) {
                                        return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                                    }
                                }
                            ]
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            align: 'end',
                            dataIndex: 'SALE_AMT',
                            text: '매출액 합계',
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                            }
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	align: 'end',
                        	dataIndex: 'S_RATE_AMT',
                        	text: '매출이익',
                        	summaryType: 'sum',
                        	summaryRenderer: function(value, summaryData, dataIndex) {
                        		return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                        	}
                        },
                        {
                            xtype: 'numbercolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            align: 'end',
                            dataIndex: 'S_RATE',
                            text: '매출이익율(%)'
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	align: 'end',
                        	dataIndex: 'KYUNG_RT_AMT',
                        	text: '경상이익',
                            summaryType: 'sum',
                            summaryRenderer: function(value, summaryData, dataIndex) {
                                return "<font color='green'>"+Ext.util.Format.number(value, '0,000.00')+"<font>"; 
                            }
                        },
                        {
                        	xtype: 'numbercolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	align: 'end',
                        	dataIndex: 'KYUNG_RT',
                        	text: '경상이익율(%)'
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 200,
                            dataIndex: 'PAY_METH_NM',
                            text: '가격조건'
                        },
                        {
                        	xtype: 'gridcolumn',
                        	style: 'font-size: 12px; text-align: center; font-weight: bold;',
                        	width: 100,
                        	dataIndex: 'SL_LOC_NM',
                        	text: '창고지역',
                        	hidden: true
                        },
                        {
                            xtype: 'gridcolumn',
                            style: 'font-size: 12px; text-align: center; font-weight: bold;',
                            width: 114,
                            dataIndex: 'REMARK',
                            text: '비고'
                        }
                    ],
                    viewConfig: {
                    	enableTextSelection: true,
                        },
                    selModel: {
                        selType: 'checkboxmodel'
                    },
                    plugins: [
                        {
                            ptype: 'gridexporter'
                        },
                        {
                            ptype: 'cellediting'
                        }
                    ],
                    features: [
                               {
                                   ftype: 'summary'
                               }
                            ],
                }
            ]
        }
    ]

});